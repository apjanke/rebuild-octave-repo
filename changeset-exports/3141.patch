# HG changeset patch
# User jwe
# Date 886493482 0
#      Tue Feb 03 08:11:22 1998 +0000
# Node ID 292ff0bf484b22492bb14888f57d369cf1f1da9e
# Parent  990ea337e950d147fbe2b01951c26b23ce0fce8e
[project @ 1998-02-03 08:11:07 by jwe]

diff --git a/ChangeLog b/ChangeLog
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,8 +1,19 @@
+Tue Feb  3 00:24:01 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* Makeconf.in (do-subst-vals): Substitute $(libexecdir) too.
+
+Mon Feb  2 22:42:27 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* configure.in: Define octlibdir.
+	* Makeconf.in: Substitute value.
+	(do-subst-config-vals): Set LIBDIR to $(octlibdir).
+	(do-subst-default-vals): Substitute OCTLIBDIR too.
+
 Sat Jan 31 19:29:56 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* acconfig.h: Add #undefs for HAVE_GAMMA and HAVE_LGAMMA to avoid
 	bug in autoconf, but #if 0 them out to avoid warning messages
 	about redefining them.
 
 Mon Jan 26 13:26:09 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
diff --git a/Makeconf.in b/Makeconf.in
--- a/Makeconf.in
+++ b/Makeconf.in
@@ -155,20 +155,21 @@ exec_prefix = @exec_prefix@
 # Where to install Octave and other binaries that people will want to
 # run directly.
 bindir = @bindir@
 
 # Where to install architecture-independent data files.  ${fcnfiledir}
 # and ${localfcnfiledir} are subdirectories of this.
 datadir = @datadir@
 
+libdir = @libdir@
+
 # Where to install and expect libraries like libcruft.a, liboctave.a,
-# and libreadline.a and other architecture-dependent data.  The
-# directory ${archlibdir} is a subdirectory of this.  
-libdir = @libdir@
+# and other architecture-dependent data.
+octlibdir = @octlibdir@
 
 # Where to install and expect executable programs to be run by Octave
 # rather than directly by users.
 libexecdir = @libexecdir@
 
 # The prefix for Octave's include file directory.  The default is
 # ${prefix}/include
 includedir = @includedir@
@@ -321,17 +322,17 @@ sed < $< \
   -e "s;%F77%;\"${F77}\";" \
   -e "s;%FFLAGS%;\"${FFLAGS}\";" \
   -e "s;%FLIBS%;\"${FLIBS}\";" \
   -e "s;%FPICFLAG%;\"${FPICFLAG}\";" \
   -e "s;%INCFLAGS%;\"-I${octincludedir} -I${includedir}\";" \
   -e "s;%LDFLAGS%;\"${LDFLAGS}\";" \
   -e "s;%LEXLIB%;\"${LEXLIB}\";" \
   -e "s;%LIBDLFCN%;\"${LIBDLFCN}\";" \
-  -e "s;%LIBFLAGS%;\"-L${libdir}\";" \
+  -e "s;%LIBFLAGS%;\"-L${octlibdir}\";" \
   -e "s;%LIBPLPLOT%;\"${LIBPLPLOT}\";" \
   -e "s;%LIBS%;\"${LIBS}\";" \
   -e "s;%RLD_FLAG%;\"${RLD_FLAG}\";" \
   -e "s;%SH_LD%;\"${SH_LD}\";" \
   -e "s;%SH_LDFLAGS%;\"${SH_LDFLAGS}\";" \
   -e "s;%TARGET_HOST_TYPE%;\"${canonical_host_type}\";" \
   -e "s;%TERMLIBS%;\"${TERMLIBS}\";" \
   -e "s;%VERSION%;\"${version}\";" \
@@ -344,23 +345,25 @@ endef
 
 define do-subst-default-vals
 echo "making $@ from $<"
 sed < $< > $@.tmp \
   -e "s;%DEFAULT_PAGER%;\"${DEFAULT_PAGER}\";" \
   -e "s;%OCTAVE_ARCHLIBDIR%;\"${archlibdir}\";" \
   -e "s;%OCTAVE_BINDIR%;\"${bindir}\";" \
   -e "s;%OCTAVE_DATADIR%;\"${datadir}\";" \
+  -e "s;%OCTAVE_LIBEXECDIR%;\"${libexecdir}\";" \
   -e "s;%OCTAVE_EXEC_PREFIX%;\"${exec_prefix}\";" \
   -e "s;%OCTAVE_FCNFILEDIR%;\"${fcnfiledir}\";" \
   -e "s;%OCTAVE_FCNFILEPATH%;\"${fcnfilepath}\";" \
   -e "s;%OCTAVE_IMAGEPATH%;\"${imagepath}\";" \
   -e "s;%OCTAVE_INFODIR%;\"${infodir}\";" \
   -e "s;%OCTAVE_INFOFILE%;\"${infofile}\";" \
   -e "s;%OCTAVE_LIBDIR%;\"${libdir}\";" \
+  -e "s;%OCTAVE_OCTLIBDIR%;\"${octlibdir}\";" \
   -e "s;%OCTAVE_LOCALARCHLIBDIR%;\"${localarchlibdir}\";" \
   -e "s;%OCTAVE_LOCALFCNFILEDIR%;\"${localfcnfiledir}\";" \
   -e "s;%OCTAVE_LOCALFCNFILEPATH%;\"${localfcnfilepath}\";" \
   -e "s;%OCTAVE_LOCALOCTFILEPATH%;\"${localoctfilepath}\";" \
   -e "s;%OCTAVE_OCTFILEDIR%;\"${octfiledir}\";" \
   -e "s;%OCTAVE_PREFIX%;\"${prefix}\";" \
   -e "s;%TARGET_HOST_TYPE%;\"${canonical_host_type}\";"
 $(top_srcdir)/move-if-change $@.tmp $@
@@ -377,8 +380,25 @@ echo $$src; \
 if [ "$$src" = "octave" ]; then \
   true; \
 else \
   cd $(includedir); \
   rm -f octave; \
   $(LN_S) $$src octave; \
 fi
 endef
+
+# Make a relative symbolic link from $libdir/octave to $octlibdir. 
+
+# XXX FIXME XXX -- this assumes that $octlibdir is a subdirectory
+# of $libdir.
+
+define mk-libdir-link
+src=`echo $(octlibdir) | sed 's|^$(libdir)/*||'` ; \
+echo $$src ; \
+if [ "$$src" = "octave" ] ; then \
+  true ; \
+else \
+  cd $(libdir) ; \
+  rm -f octave ; \
+  $(LN_S) $$src octave ; \
+fi
+endef
diff --git a/PROJECTS b/PROJECTS
--- a/PROJECTS
+++ b/PROJECTS
@@ -101,16 +101,20 @@ Numerical:
     detected that the matrix is triangular.
 
   * The polyfit function uses the economy QR factorization, but even
     that can take a lot of time for large datasets.  Consider an
     option to compute the result with inv (A' * A) * A' * y or some
     other faster method.d  Possibly just switch to this method if the
     dataset is larger than some value.
 
+  * Make QR more memory efficient for large matrices when not all the
+    columns of Q are required (apparently this is not handled by the
+    lapack code yet).
+
   * Consider making the behavior of the / and \ operators for
     non-square systems compatible with Matlab.
 
 --------
 Graphics:
 --------
 
   * Make plotting with plplot work.
diff --git a/aclocal.m4 b/aclocal.m4
--- a/aclocal.m4
+++ b/aclocal.m4
@@ -78,16 +78,18 @@ AC_DEFUN(OCTAVE_PROG_G77,
 [AC_CACHE_CHECK([whether ${F77-f77} is the GNU Fortran compiler],
 octave_cv_f77_is_g77,
 [if $use_g77; then
   octave_cv_f77_is_g77=yes
 else
   f77_output=`$F77 -v 2>&1 | grep "GNU F77"`
   if test -n "$f77_output"; then
     octave_cv_f77_is_g77=yes
+  else
+    octave_cv_f77_is_g77=no
   fi
 fi])
 ])
 dnl
 dnl See what libraries are used by the Fortran compiler.
 dnl
 dnl Write a minimal program and compile it with -v.  I don't know what
 dnl to do if your compiler doesn't have -v...
diff --git a/configure.in b/configure.in
--- a/configure.in
+++ b/configure.in
@@ -16,17 +16,17 @@ dnl Copyright (C) 1996, 1997 John W. Eat
 ### FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 ### for more details.
 ### 
 ### You should have received a copy of the GNU General Public License
 ### along with Octave; see the file COPYING.  If not, write to the Free
 ### Software Foundation, 59 Temple Place - Suite 330, Boston, MA
 ### 02111-1307, USA. 
 
-AC_REVISION($Revision: 1.295 $)
+AC_REVISION($Revision: 1.296 $)
 AC_PREREQ(2.9)
 AC_INIT(src/octave.cc)
 AC_CONFIG_HEADER(config.h)
 
 AC_DEFINE(OCTAVE_SOURCE, 1)
 
 OCTAVE_HOST_TYPE
 
@@ -34,16 +34,17 @@ OCTAVE_HOST_TYPE
 
 OCTAVE_SET_DEFAULT(man1dir, '$(mandir)/man1')
 OCTAVE_SET_DEFAULT(man1ext, '.1')
 OCTAVE_SET_DEFAULT(infofile, '$(infodir)/octave.info')
 OCTAVE_SET_DEFAULT(octincludedir, '$(includedir)/octave-$(version)/octave')
 OCTAVE_SET_DEFAULT(fcnfiledir, '$(datadir)/octave/$(version)/m')
 OCTAVE_SET_DEFAULT(localfcnfiledir, '$(datadir)/octave/site/m')
 OCTAVE_SET_DEFAULT(localfcnfilepath, '$(localfcnfiledir)//')
+OCTAVE_SET_DEFAULT(octlibdir, '$(libdir)/octave-$(version)')
 OCTAVE_SET_DEFAULT(archlibdir,
   '$(libexecdir)/octave/$(version)/exec/$(canonical_host_type)')
 OCTAVE_SET_DEFAULT(localarchlibdir,
   '$(libexecdir)/octave/site/exec/$(canonical_host_type)')
 OCTAVE_SET_DEFAULT(octfiledir,
   '$(libexecdir)/octave/$(version)/oct/$(canonical_host_type)')
 OCTAVE_SET_DEFAULT(localoctfiledir,
   '$(libexecdir)/octave/site/oct/$(canonical_host_type)')
diff --git a/doc/interpreter/matrix.texi b/doc/interpreter/matrix.texi
--- a/doc/interpreter/matrix.texi
+++ b/doc/interpreter/matrix.texi
@@ -648,28 +648,16 @@ Otherwise, an error message is printed a
 top level.  The default value is 0.
 @end defvr
 
 @node Famous Matrices,  , Special Utility Matrices, Matrix Manipulation
 @section Famous Matrices
 
 The following functions return famous matrix forms.
 
-@deftypefn {Function File} {} hadamard (@var{k})
-Return the Hadamard matrix of order
-@iftex
-@tex
-$n = 2^k$.
-@end tex
-@end iftex
-@ifinfo
-n = 2^k.
-@end ifinfo
-@end deftypefn
-
 @deftypefn {Function File} {} hankel (@var{c}, @var{r})
 Return the Hankel matrix constructed given the first column @var{c}, and
 (optionally) the last row @var{r}.  If the last element of @var{c} is
 not the same as the first element of @var{r}, the last element of
 @var{c} is used.  If the second argument is omitted, the last row is
 taken to be the same as the first column.
 
 A Hankel matrix formed from an m-vector @var{c}, and an n-vector
@@ -720,16 +708,28 @@ H (i, j) = 1 / (i + j - 1)
 
 @deftypefn {Function File} {} invhilb (@var{n})
 Return the inverse of a Hilbert matrix of order @var{n}.  This is exact.
 Compare with the numerical calculation of @code{inverse (hilb (n))},
 which suffers from the ill-conditioning of the Hilbert matrix, and the
 finite precision of your computer's floating point arithmetic.
 @end deftypefn
 
+@deftypefn {Function File} {} sylvester_matrix (@var{k})
+Return the Sylvester matrix of order
+@iftex
+@tex
+$n = 2^k$.
+@end tex
+@end iftex
+@ifinfo
+n = 2^k.
+@end ifinfo
+@end deftypefn
+
 @deftypefn {Function File} {} toeplitz (@var{c}, @var{r})
 Return the Toeplitz matrix constructed given the first column @var{c},
 and (optionally) the first row @var{r}.  If the first element of @var{c}
 is not the same as the first element of @var{r}, the first element of
 @var{c} is used.  If the second argument is omitted, the first row is
 taken to be the same as the first column.
 
 A square Toeplitz matrix has the form
diff --git a/install-octave b/install-octave
--- a/install-octave
+++ b/install-octave
@@ -71,29 +71,30 @@ exec_prefix="$prefix"
 # Where to install Octave and other binaries that people will want to
 # run directly.
 bindir="$exec_prefix/bin"
 
 # Where to install architecture-independent data files.  ${fcnfiledir}
 # and ${localfcnfiledir} are subdirectories of this.
 datadir="$prefix/share"
 
-# Where to install and expect libraries like libcruft.a, liboctave.a,
-# and libreadline.a, executable files to be run by Octave rather than
-# directly by users, and other architecture-dependent data.
-# ${archlibdir} is a subdirectory of this. 
 libdir="$exec_prefix/lib"
 
+# Where to install and expect libraries like libcruft.a and liboctave.a.
+octlibdir="$libdir/octave-$version"
+
 # Where to install and expect executable programs to be run by Octave
 # rather than directly by users.
 libexecdir="$exec_prefix/libexec"
 
+includedir="$prefix/include"
+
 # Where to install Octave's include files.  The default is
-# ${prefix}/include/octave
-includedir="$prefix/include"
+# ${prefix}/include/octave-$version
+octincludedir=$includedir/octave-$version
 
 # Where to install Octave's man pages, and what extension they should
 # have.  The default is ${prefix}/man/man1
 mandir="$prefix/man/man1"
 manext="1"
 
 # Where to install and expect the info files describing Octave..
 infodir="$prefix/info"
@@ -154,17 +155,19 @@ imagepath=".:$imagedir//"
 
 cat << EOF
 Installing octave in the following subdirectories of
 $prefix:
 
             bindir: `echo $bindir | sed "s,^$prefix/,,"`
            datadir: `echo $datadir | sed "s,^$prefix/,,"`
             libdir: `echo $libdir | sed "s,^$prefix/,,"`
+         octlibdir: `echo $octlibdir | sed "s,^$prefix/,,"`
         includedir: `echo $includedir | sed "s,^$prefix/,,"`
+     octincludedir: `echo $octincludedir | sed "s,^$prefix/,,"`
             mandir: `echo $mandir | sed "s,^$prefix/,,"`
            infodir: `echo $infodir | sed "s,^$prefix/,,"`
         fcnfiledir: `echo $fcnfiledir | sed "s,^$prefix/,,"`
    localfcnfiledir: `echo $localfcnfiledir | sed "s,^$prefix/,,"`
         archlibdir: `echo $archlibdir | sed "s,^$prefix/,,"`
    localarchlibdir: `echo $localarchlibdir | sed "s,^$prefix/,,"`
         octfiledir: `echo $octfiledir | sed "s,^$prefix/,,"`
    localoctfiledir: `echo $localoctfiledir | sed "s,^$prefix/,,"`
@@ -179,49 +182,54 @@ read ans
 case "$ans" in
   y | Y | yes | YES)
   ;;
   *)
     exit 1
   ;;
 esac
 
-DIRS_TO_MAKE="$bindir $datadir $libdir $libexecdir $includedir $mandir \
-  $infodir $fcnfiledir $localfcnfiledir $archlibdir $localarchlibdir \
+DIRS_TO_MAKE="$bindir $datadir $libdir $octlibdir $libexecdir \
+  $includedir $octincludedir $mandir $infodir $fcnfiledir \
+  $localfcnfiledir $archlibdir $localarchlibdir \
   $octfiledir $localoctfiledir $imagedir"
 
 ./mkinstalldirs $DIRS_TO_MAKE
 
 if test "$prefix" = /usr/local
 then
   echo "installing src/octave as $bindir/octave"
   cp src/octave $bindir/octave
   chmod 755 $bindir/octave
 else
   echo "installing octave-sh as $bindir/octave"
-  sed "s|@OCTAVE_HOME@|$prefix|; s|@LD_LIBRARY_PATH@|$libdir|" octave-sh \
+  sed "s|@OCTAVE_HOME@|$prefix|; s|@LD_LIBRARY_PATH@|$octlibdir|" octave-sh \
     > $bindir/octave
   chmod 755 $bindir/octave
 
   echo "installing src/octave as $bindir/octave.bin"
   cp src/octave $bindir/octave.bin
   chmod 755 $bindir/octave.bin
 fi
 
 echo "installing octave-bug as $bindir/octave-bug"
 cp octave-bug $bindir/octave-bug
 chmod 755 $bindir/octave-bug
 
+echo "installing info as $archlibdir/info"
+cp info/info $archlibdir/info
+chmod 755 $archlibdir/info
+
 if test -f LIBRARIES; then
-  echo "installing shared libraries in $libdir"
+  echo "installing shared libraries in $octlibdir"
   for f in `cat LIBRARIES`
   do
     file=`basename $f`
-    cp $f $libdir/$file
-    chmod 644 $libdir/$file
+    cp $f $octlibdir/$file
+    chmod 644 $octlibdir/$file
   done
 fi
 
 oct_files=`find . -name '*.oct' -print`
 if test -n "$oct_files"; then
   echo "installing .oct files in $octfiledir"
   cd src
   for f in $oct_files
@@ -255,17 +263,20 @@ for f in `find . -name '*.img' -print`
 do
   file=`basename $f`
   cp $f $imagedir/$file
   chmod 644 $imagedir/$file
 done
 cd $distdir
 
 echo "creating ls-R file in $datadir/octave"
-ls -LR $datadir/octave $libexecdir/octave > $datadir/octave/ls-R
+ls -LR $datadir/octave > $datadir/octave/ls-R
+
+echo "creating ls-R file in $libexecdir/octave"
+ls -LR $libexecdir/octave > $libexecdir/octave/ls-R
 
 echo "installing info files in $infodir"
 for f in doc/interpreter/octave.info*
 do
   file=`basename $f`
   cp $f $infodir/$file
   chmod 644 $infodir/$file
 done
diff --git a/libcruft/ChangeLog b/libcruft/ChangeLog
--- a/libcruft/ChangeLog
+++ b/libcruft/ChangeLog
@@ -1,10 +1,13 @@
 Sun Feb  1 12:39:10 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
+	* Makefile.in (install, uninstall): Use $(octlibdir), not $(libdir).
+	Use $(mk-libdir-link).
+
 	* quadpack/dqagi.f, quadpack/dqagie.f, quadpack/dqagp.f,
 	quadpack/dqagpe.f, quadpack/dqk15i.f, quadpack/dqk21.f:
 	Make user-supplied code a subroutine instead of a function.
 
 Mon Jan 19 23:11:21 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* lapack/xdlange.f, lapack/xzlange.f: New files.
 
diff --git a/libcruft/Makefile.in b/libcruft/Makefile.in
--- a/libcruft/Makefile.in
+++ b/libcruft/Makefile.in
@@ -85,38 +85,40 @@ libcruft.$(SHLEXT_VER): $(CRUFT_PICOBJ)
 
 check: all
 .PHONY: check
 
 install install-strip uninstall clean mostlyclean distclean maintainer-clean::
 	@$(subdir-for-command)
 
 install::
-	$(top_srcdir)/mkinstalldirs $(libdir)
+	$(top_srcdir)/mkinstalldirs $(octlibdir)
 	if $(STATIC_LIBS); then \
-	  rm -f $(libdir)/libcruft.$(LIBEXT) ; \
-	  $(INSTALL_DATA) libcruft.$(LIBEXT) $(libdir)/libcruft.$(LIBEXT) ; \
-	  $(RANLIB) $(libdir)/libcruft.$(LIBEXT) ; \
+	  rm -f $(octlibdir)/libcruft.$(LIBEXT) ; \
+	  $(INSTALL_DATA) libcruft.$(LIBEXT) \
+	    $(octlibdir)/libcruft.$(LIBEXT) ; \
+	  $(RANLIB) $(octlibdir)/libcruft.$(LIBEXT) ; \
 	fi
 	if $(SHARED_LIBS); then \
-	  rm -f $(libdir)/libcruft.$(SHLEXT_VER); \
+	  rm -f $(octlibdir)/libcruft.$(SHLEXT_VER); \
 	  $(INSTALL_PROGRAM) \
-	    libcruft.$(SHLEXT_VER) $(libdir)/libcruft.$(SHLEXT_VER); \
-	  cd $(libdir); \
+	    libcruft.$(SHLEXT_VER) $(octlibdir)/libcruft.$(SHLEXT_VER); \
+	  cd $(octlibdir); \
 	  rm -f libcruft.$(SHLEXT); \
 	  $(LN_S) libcruft.$(SHLEXT_VER) libcruft.$(SHLEXT); \
 	fi
+	$(mk-libdir-link)
 
 install-strip::
 	$(MAKE) INSTALL_PROGRAM="$(INSTALL_PROGRAM) -s" install
 
 uninstall::
-	rm -f $(libdir)/libcruft.$(LIBEXT)
-	rm -f $(libdir)/libcruft.$(SHLEXT)
-	rm -f $(libdir)/libcruft.$(SHLEXT_VER)
+	rm -f $(octlibdir)/libcruft.$(LIBEXT)
+	rm -f $(octlibdir)/libcruft.$(SHLEXT)
+	rm -f $(octlibdir)/libcruft.$(SHLEXT_VER)
 
 tags TAGS:: $(SOURCES)
 	$(SUBDIR_FOR_COMMAND)
 
 tags::
 	ctags $(SOURCES)
 
 TAGS:: $(SOURCES)
diff --git a/libcruft/slatec-fn/Makefile b/libcruft/slatec-fn/Makefile
deleted file mode 100644
--- a/libcruft/slatec-fn/Makefile
+++ /dev/null
@@ -1,19 +0,0 @@
-# Generated automatically from Makefile.in by configure.
-#
-# Makefile for octave's libcruft/slatec-fn directory
-#
-# John W. Eaton
-# jwe@bevo.che.wisc.edu
-# University of Wisconsin-Madison
-# Department of Chemical Engineering
-
-TOPDIR = ../..
-
-srcdir = .
-top_srcdir = ../..
-
-EXTERNAL_DISTFILES = $(DISTFILES)
-
-include $(TOPDIR)/Makeconf
-
-include ../Makerules
diff --git a/liboctave/ChangeLog b/liboctave/ChangeLog
--- a/liboctave/ChangeLog
+++ b/liboctave/ChangeLog
@@ -1,8 +1,20 @@
+Mon Feb  2 01:42:56 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* Makefile.in (install, uninstall): Use $(octlibdir), not $(libdir).
+	Use $(mk-libdir-link).
+
+	* file-stat.cc (file_stat::update_internal): Use stat and lstat,
+	not SAFE_STAT and SAFE_LSTAT.
+	(lstat): New function, defined if HAVE_LSTAT is not defined.
+	* safe-xstat.hin, safe-xstat.cin: Delete.
+	* Makefile.in: Delete rules for safe-stat.h, safe-stat.c,
+	safe-lstat.h, and safe-lstat.cc.
+
 Fri Jan 30 23:48:43 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* chMatrix.cc (charMatrix::all, charMatrix::any): New functions.
 
 Tue Jan 20 16:30:00 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* dMatrix.cc (Matrix::expm): Skip trace normalization step if the
 	trace is negative. 
diff --git a/liboctave/Makefile.in b/liboctave/Makefile.in
--- a/liboctave/Makefile.in
+++ b/liboctave/Makefile.in
@@ -88,18 +88,17 @@ SOURCES := Bounds.cc CollocWt.cc DAE.cc 
 	$(TI_SRC) \
 	$(MATRIX_SRC) \
 	$(MX_OP_SRC)
 
 EXTRAS := mx-inlines.cc
 
 INCLUDES_FOR_INSTALL := $(INCLUDES) $(TEMPLATE_SRC) $(EXTRAS)
 
-DISTFILES := Makefile.in ChangeLog safe-xstat.cin safe-xstat.hin \
-	$(SOURCES) $(INCLUDES) $(EXTRAS)
+DISTFILES := Makefile.in ChangeLog $(SOURCES) $(INCLUDES) $(EXTRAS)
 
 ifeq ($(SHARED_LIBS), true)
   BINDISTFILES = liboctave.$(SHLEXT_VER)
   BINDISTLIBS = liboctave/liboctave.$(SHLEXT_VER)
 endif
 
 MAKEDEPS_1 := $(patsubst %.cc, %.d, $(SOURCES))
 MAKEDEPS := $(patsubst %.c, %.d, $(MAKEDEPS_1))
@@ -112,22 +111,19 @@ ifeq ($(SHARED_LIBS), true)
     PICOBJ := $(addprefix pic/, $(OBJECTS))
   else
     PICOBJ := $(OBJECTS)
   endif
 endif
 
 LIBOCTAVE_DEPEND := $(patsubst %, liboctave.$(LIBEXT)(%), $(OBJECTS))
 
-all: stamp-prereq libraries
+all: libraries
 .PHONY: all
 
-stamp-prereq: pic safe-stat.h safe-lstat.h
-	touch stamp-prereq
-
 pic:
 	@if [ -d pic ]; then \
 	  true; \
 	else \
 	  echo "mkdir pic"; \
 	  mkdir pic; \
 	fi
 
@@ -152,102 +148,80 @@ liboctave.$(LIBEXT): $(OBJECTS)
 
 liboctave.$(SHLEXT): liboctave.$(SHLEXT_VER)
 	rm -f $@
 	$(LN_S) $< $@
 
 liboctave.$(SHLEXT_VER): $(PICOBJ)
 	$(SH_LD) $(SH_LDFLAGS) $(SONAME_FLAGS) -o $@ $^
 
-extract_stat = sed 's/@l@//g; s/@L@//g; /@LSTAT_ONLY@/d'
-extract_lstat = sed 's/@l@/l/g; s/@L@/L/g; s/	*@LSTAT_ONLY@//'
-
-safe-lstat.c: safe-xstat.cin
-	@echo "making $@ from $<"
-	@$(extract_lstat) $< > $@.tmp
-	@$(top_srcdir)/move-if-change $@.tmp $@
-
-safe-lstat.h: safe-xstat.hin
-	@echo "making $@ from $<"
-	@$(extract_lstat) $< > $@.tmp
-	@$(top_srcdir)/move-if-change $@.tmp $@
-
-safe-stat.c: safe-xstat.cin
-	@echo "making $@ from $<"
-	@$(extract_stat) $< > $@.tmp
-	@$(top_srcdir)/move-if-change $@.tmp $@
-
-safe-stat.h: safe-xstat.hin
-	@echo "making $@ from $<"
-	@$(extract_stat) $< > $@.tmp
-	@$(top_srcdir)/move-if-change $@.tmp $@
-
-safe-stat.o: safe-stat.h
-safe-lstat.o: safe-lstat.h safe-stat.h
+$(PICOBJ): pic
 
 check: all
 .PHONY: check
 
 install: install-lib install-inc
 .PHONY: install
 
 install-strip:
 	$(MAKE) INSTALL_PROGRAM="$(INSTALL_PROGRAM) -s" install
 .PHONY: install-strip
 
 install-lib:
-	$(top_srcdir)/mkinstalldirs $(libdir)
+	$(top_srcdir)/mkinstalldirs $(octlibdir)
 	if $(STATIC_LIBS); then \
-	  rm -f $(libdir)/liboctave.$(LIBEXT); \
-	  $(INSTALL_DATA) liboctave.$(LIBEXT) $(libdir)/liboctave.$(LIBEXT); \
-	  $(RANLIB) $(libdir)/liboctave.$(LIBEXT); \
+	  rm -f $(octlibdir)/liboctave.$(LIBEXT); \
+	  $(INSTALL_DATA) liboctave.$(LIBEXT) \
+	    $(octlibdir)/liboctave.$(LIBEXT); \
+	  $(RANLIB) $(octlibdir)/liboctave.$(LIBEXT); \
 	fi
 	if $(SHARED_LIBS); then \
-	  rm -f $(libdir)/liboctave.$(SHLEXT_VER); \
+	  rm -f $(octlibdir)/liboctave.$(SHLEXT_VER); \
 	  $(INSTALL_PROGRAM) \
-	    liboctave.$(SHLEXT_VER) $(libdir)/liboctave.$(SHLEXT_VER); \
-	  cd $(libdir); \
+	    liboctave.$(SHLEXT_VER) $(octlibdir)/liboctave.$(SHLEXT_VER); \
+	  cd $(octlibdir); \
 	  rm -f liboctave.$(SHLEXT); \
 	  $(LN_S) liboctave.$(SHLEXT_VER) liboctave.$(SHLEXT); \
 	fi
+	$(mk-libdir-link)
 .PHONY: install-lib
 
 install-inc:
 	$(top_srcdir)/mkinstalldirs $(octincludedir)
 	for f in $(INCLUDES_FOR_INSTALL); do \
 	  rm -f $(octincludedir)/$$f; \
 	  $(INSTALL_DATA) $(srcdir)/$$f $(octincludedir)/$$f; \
 	done
 	$(mk-includedir-link)
 .PHONY: install-inc
 
 uninstall:
-	rm -f $(libdir)/liboctave.$(LIBEXT)
-	rm -f $(libdir)/liboctave.$(SHLEXT)
-	rm -f $(libdir)/liboctave.$(SHLEXT_VER)
+	rm -f $(octlibdir)/liboctave.$(LIBEXT)
+	rm -f $(octlibdir)/liboctave.$(SHLEXT)
+	rm -f $(octlibdir)/liboctave.$(SHLEXT_VER)
 	for f in $(INCLUDES); do rm -f $(octincludedir)/$$f; done
 .PHONY: uninstall
 
 tags: $(SOURCES)
 	ctags $(SOURCES)
 
 TAGS: $(SOURCES)
 	etags $(SOURCES)
 
 clean:
-	rm -f safe-stat.h safe-lstat.h *.$(LIBEXT) *.o *.d pic/*.o
+	rm -f *.$(LIBEXT) *.o *.d pic/*.o
+	-rmdir pic
 	if $(SHARED_LIBS); then rm -f *.$(SHLEXT_VER) *.$(SHLEXT); fi
 .PHONY: clean
 
 mostlyclean: clean
 .PHONY: mostlyclean
 
 distclean: clean
-	rm -f Makefile so_locations stamp-prereq
-	-rmdir pic
+	rm -f Makefile so_locations
 .PHONY: distclean
 
 maintainer-clean: distclean
 	rm -f tags TAGS
 .PHONY: maintainer-clean
 
 dist:
 	ln $(DISTFILES) ../`cat ../.fname`/liboctave
@@ -257,16 +231,11 @@ bin-dist:
 	if [ -n "$(BINDISTFILES)" ]; then \
 	  ln $(BINDISTFILES) ../`cat ../.fname`/liboctave; \
 	fi
 	if [ -n "$(BINDISTLIBS)" ]; then \
 	  echo $(BINDISTLIBS) >> ../`cat ../.fname`/LIBRARIES; \
 	fi
 .PHONY: bin-dist
 
-# If missing, GNU make attempts to create them in the reverse of the
-# order in which they are listed here.  We rely on that fact to ensure
-# that the safe-stat.h and safe-lstat.h files are created before trying
-# to create the .d files.  Hmm.  I wonder if we can count on that...
-
 ifndef omit_deps
--include $(MAKEDEPS) stamp-prereq
+-include $(MAKEDEPS)
 endif
diff --git a/liboctave/file-stat.cc b/liboctave/file-stat.cc
--- a/liboctave/file-stat.cc
+++ b/liboctave/file-stat.cc
@@ -32,20 +32,23 @@ Software Foundation, 59 Temple Place - S
 #include <sys/types.h>
 #endif
 #include <unistd.h>
 #endif
 
 #include "file-stat.h"
 #include "statdefs.h"
 
-// These must come after <sys/types.h> and <sys/stat.h>.
-
-#include <safe-lstat.h>
-#include <safe-stat.h>
+#if !defined (HAVE_LSTAT)
+static inline int
+lstat (const char *name, struct stat *buf)
+{
+  return stat (name, buf);
+}
+#endif
 
 // XXX FIXME XXX -- the is_* and mode_as_string functions are only valid
 // for initialized objects.  If called for an object that is not
 // initialized, they should throw an exception.
 
 bool
 file_stat::is_blk (void) const
 {
@@ -150,18 +153,17 @@ file_stat::update_internal (bool force)
     {
       initialized = false;
       fail = false;
 
       const char *cname = file_name.c_str ();
 
       struct stat buf;
 
-      int status = follow_links
-	? SAFE_STAT (cname, &buf) : SAFE_LSTAT (cname, &buf);
+      int status = follow_links ? stat (cname, &buf) : lstat (cname, &buf);
 
       if (status < 0)
 	{
 	  fail = true;
 	  errmsg = strerror (errno);
 	}
       else
 	{
diff --git a/octave-bug.in b/octave-bug.in
--- a/octave-bug.in
+++ b/octave-bug.in
@@ -10,17 +10,17 @@
 # University of Wisconsin-Madison
 # Department of Chemical Engineering
 
 # Configuration:  these variables are filled in when running make to
 # compile Octave.
 
 config_opts=%config_opts%
 VERSION=%VERSION%
-MACHINE=%TARGET_HOST_TYPE%
+MACHINE=%CANONICAL_HOST_TYPE%
 F77=%F77%
 FFLAGS=%FFLAGS%
 FPICFLAG=%FPICFLAG%
 FLIBS=%FLIBS%
 F2C=%F2C%
 F2CFLAGS=%F2CFLAGS%
 CPPFLAGS=%CPPFLAGS%
 INCFLAGS=%INCFLAGS%
diff --git a/scripts/ChangeLog b/scripts/ChangeLog
--- a/scripts/ChangeLog
+++ b/scripts/ChangeLog
@@ -1,8 +1,19 @@
+Tue Feb  3 00:18:40 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* special-matrix/sylvester_matrix.m: Rename from hadamard.m
+
+	* miscellaneous/bug_report.m: Don't try to get smart with
+	OCTAVE_HOME.  Assume octave-bug can be found in EXEC_PATH.
+
+	* Makefile.in (install): Create separate ls-R files for
+	$(datadir) and $(libexecdir).
+	(uninstall): Remove both ls-R files.
+
 Sat Jan 31 01:09:32 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* signal/fftshift.m: New file.
 
 	* plot/contour.m: Fix for non-square case.
 
 	* general/randperm.m: New file.
 
diff --git a/scripts/Makefile.in b/scripts/Makefile.in
--- a/scripts/Makefile.in
+++ b/scripts/Makefile.in
@@ -45,20 +45,21 @@ all: $(SUBDIRS)
 .PHONY: $(SUBDIRS)
 
 install install-strip uninstall clean mostlyclean distclean maintainer-clean::
 	@$(subdir-for-command)
 .PHONY: install install-strip uninstall
 .PHONY: clean mostlyclean distclean maintainer-clean
 
 install install-strip::
-	ls -LR $(datadir)/octave $(libexecdir)/octave > $(datadir)/octave/ls-R
+	ls -LR $(datadir)/octave > $(datadir)/octave/ls-R
+	ls -LR $(libexecdir)/octave > $(libexecdir)/octave/ls-R
 
 uninstall::
-	rm -f $(datadir)/octave/ls-R
+	rm -f $(datadir)/octave/ls-R $(libexecdir)/octave/ls-R
 
 tags TAGS:: $(SOURCES)
 	$(SUBDIR_FOR_COMMAND)
 
 tags::
 	ctags $(SOURCES)
 
 TAGS:: $(SOURCES)
diff --git a/scripts/linear-algebra/orth.m b/scripts/linear-algebra/orth.m
--- a/scripts/linear-algebra/orth.m
+++ b/scripts/linear-algebra/orth.m
@@ -28,35 +28,41 @@
 ## maximal singular value of A.
 
 ## Author: KH <Kurt.Hornik@ci.tuwien.ac.at>
 ## Created: 24 December 1993.
 ## Adapted-By: jwe
 
 function retval = orth (A, tol)
 
-  [U, S, V] = svd (A);
+  if (nargin == 1 || nargin == 2)
 
-  [rows, cols] = size (A);
+    [U, S, V] = svd (A);
 
-  [S_nr, S_nc] = size (S);
+    [rows, cols] = size (A);
 
-  if (S_nr == 1 || S_nc == 1)
-    s = S(1);
-  else
-    s = diag (S);
-  endif
+    [S_nr, S_nc] = size (S);
+
+    if (S_nr == 1 || S_nc == 1)
+      s = S(1);
+    else
+      s = diag (S);
+    endif
 
-  if (nargin == 1)
-    tol = max (size (A)) * s (1) * eps;
-  elseif (nargin != 2)
-    usage ("orth (A [, tol])");
-  endif
+    if (nargin == 1)
+      tol = max (size (A)) * s (1) * eps;
+    endif
+
+    rank = sum (s > tol);
 
-  rank = sum (s > tol);
+    if (rank > 0)
+      retval = -U (:, 1:rank);
+    else
+      retval = zeros (rows, 0);
+    endif
 
-  if (rank > 0)
-    retval = -U (:, 1:rank);
   else
-    retval = zeros (rows, 0);
+
+    usage ("orth (a [, tol]");
+
   endif
 
 endfunction
diff --git a/scripts/miscellaneous/bug_report.m b/scripts/miscellaneous/bug_report.m
--- a/scripts/miscellaneous/bug_report.m
+++ b/scripts/miscellaneous/bug_report.m
@@ -44,17 +44,17 @@ function bug_report ()
     if (! isempty (prefs))
       fid = fopen (prefs, "w");
       if (fid > 0)
         dump_prefs (fid);
         fclose (fid);
       endif
     endif
 
-    cmd = strcat (OCTAVE_HOME, "/bin/octave-bug");
+    cmd = "octave-bug";
 
     if (length (subject) > 0)
       cmd = sprintf ("%s -s \"%s\"", cmd, subject);
     endif
 
     if (! isempty (prefs))
       cmd = sprintf ("%s %s", cmd, prefs);
     endif
diff --git a/src/ChangeLog b/src/ChangeLog
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,8 +1,44 @@
+Tue Feb  3 00:24:44 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* defaults.cc (exec_path): Append Vbin_dir to std_path.
+
+	* octave.cc (initialize_pathsearch): Set TEXMFDBS, not TEXMF.
+	Look for OCTAVE_DB_PATH in environment.
+	Simplify using Vdata_dir and Vlibexec_dir.
+
+	* defaults.h.in (Vdata_dir, Vlibexecdir): Declare new vars.
+	defaults.cc: Define them.
+	(set_default_data_dir, set_default_libexecdir): New functions.
+	(install_defaults): Call them.
+
+	* defaults.h.in (OCTAVE_LIBEXECDIR): Define.
+
+Mon Feb  2 02:43:16 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
+
+	* Makefile.in (install, uninstall): Use $(octlibdir), not $(libdir).
+	Use mk-libdir-link.
+
+	* defaults.h.in (OCTAVE_OCTLIBDIR): Substitute value.
+	(Vlib_dir): Delete declaration.
+	* defaults.cc (Vlib_dir): Delete.
+	(set_default_lib_dir): Delete.
+	(install_defaults): Don't call set_default_lib_dir.
+	(set_default_info_prog): If oct_info_prog is empty, set default to
+	"info" -- we expect it to be somewhere in the user's path.
+
+	* defun.h (DEFCONST, DEFCONSTX): Eliminate inst_as_fcn and chg_fcn
+	args.  Always pass true for inst_as_fcn and 0 for chg_fcn to
+	DEFVAR when creating built-in values like `e' or `stderr' that can
+	be redefined.  Change all uses.
+
+	* help.cc (Ftype): Handle script files too.
+	(Fwhich): Likewise.
+
 Sat Jan 31 00:00:26 1998  John W. Eaton  <jwe@bevo.che.wisc.edu>
 
 	* ov-ch-mat.cc (octave_char_matrix::is_true): Make it work.
 	* ov-str-mat.h, ov-str-mat.cc (octave_char_matrix_str::is_true):
 	Delete.
 
 	* load-save.cc (read_ascii_data): Allow strings of length 0.
 	If we don't find data on the first call, fail with error message.
diff --git a/src/Makefile.in b/src/Makefile.in
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -191,17 +191,17 @@ all: stamp-prereq libraries stamp-oct-li
 .PHONY: all
 
 stamp-oct-links: $(OCT_FILES)
 	if [ -n "$(OCT_FILES)" ]; then \
 	  $(srcdir)/mk-oct-links . $(addprefix $(srcdir)/, $(DLD_SRC)); \
 	fi
 	touch stamp-oct-links
 
-stamp-prereq: pic defaults.h oct-conf.h
+stamp-prereq: defaults.h oct-conf.h
 	touch stamp-prereq
 
 octave: octave.o builtins.o ops.o $(DLD_STATIC_OBJ) libraries
 	$(CXX) $(CPPFLAGS) $(ALL_CXXFLAGS) $(ALL_LDFLAGS) -o octave \
 	octave.o builtins.o ops.o $(DLD_STATIC_OBJ) \
 	$(OCTAVE_LFLAGS) \
 	$(OCTAVE_LIBS) \
 	$(FLIBS) $(LEXLIB) $(TERMLIBS) $(LIBS)
@@ -235,16 +235,18 @@ liboctinterp.$(LIBEXT): $(OBJECTS)
 
 liboctinterp.$(SHLEXT): liboctinterp.$(SHLEXT_VER)
 	rm -f $@
 	$(LN_S) $< $@
 
 liboctinterp.$(SHLEXT_VER): $(PICOBJ)
 	$(SH_LD) $(SH_LDFLAGS) $(SONAME_FLAGS) -o $@ $^
 
+$(PICOBJ): pic
+
 builtins.cc: $(DEF_FILES) mkbuiltins
 	@echo making $@
 	@echo DEF_FILES = $(DEF_FILES)
 	@echo VAR_FILES = $(VAR_FILES)
 	@echo $(DEF_FILES) > def-files
 	@echo $(VAR_FILES) > var-files
 	@$(srcdir)/mkbuiltins def-files var-files > $@.t
 	@$(top_srcdir)/move-if-change $@.t $@
@@ -285,31 +287,32 @@ install-oct:
 	    $(INSTALL_PROGRAM) $$f $(octfiledir)/$$f; \
 	  done; \
 	  $(srcdir)/mk-oct-links \
 	    $(octfiledir) $(addprefix $(srcdir)/, $(DLD_SRC)); \
 	fi
 .PHONY: install-oct
 
 install-lib:
-	$(top_srcdir)/mkinstalldirs $(libdir)
+	$(top_srcdir)/mkinstalldirs $(octlibdir)
 	if $(STATIC_LIBS); then \
-	  rm -f $(libdir)/liboctinterp.$(LIBEXT); \
+	  rm -f $(octlibdir)/liboctinterp.$(LIBEXT); \
 	  $(INSTALL_DATA) liboctinterp.$(LIBEXT) \
-	    $(libdir)/liboctinterp.$(LIBEXT); \
-	  $(RANLIB) $(libdir)/liboctinterp.$(LIBEXT); \
+	    $(octlibdir)/liboctinterp.$(LIBEXT); \
+	  $(RANLIB) $(octlibdir)/liboctinterp.$(LIBEXT); \
 	fi
 	if $(SHARED_LIBS); then \
-	  rm -f $(libdir)/liboctinterp.$(SHLEXT_VER); \
-	  $(INSTALL_PROGRAM) \
-	    liboctinterp.$(SHLEXT_VER) $(libdir)/liboctinterp.$(SHLEXT_VER); \
-	  cd $(libdir); \
+	  rm -f $(octlibdir)/liboctinterp.$(SHLEXT_VER); \
+	  $(INSTALL_PROGRAM) liboctinterp.$(SHLEXT_VER) \
+	    $(octlibdir)/liboctinterp.$(SHLEXT_VER); \
+	  cd $(octlibdir); \
 	  rm -f liboctinterp.$(SHLEXT); \
 	  $(LN_S) liboctinterp.$(SHLEXT_VER) liboctinterp.$(SHLEXT); \
 	fi
+	$(mk-libdir-link)
 .PHONY: install-lib
 
 install-inc:
 	$(top_srcdir)/mkinstalldirs $(octincludedir)
 	for f in $(INCLUDES); do \
 	  rm -f $(octincludedir)/$$f; \
 	  $(INSTALL_DATA) $(srcdir)/$$f $(octincludedir)/$$f; \
 	done
@@ -321,50 +324,50 @@ install-inc:
 	    $(INSTALL_DATA) $(srcdir)/$$f $(octincludedir)/$$f ; \
 	  fi ; \
 	done
 	$(mk-includedir-link)
 .PHONY: install-inc
 
 uninstall:
 	rm -f $(bindir)/octave$(EXE)
-	rm -f $(libdir)/liboctinterp.$(LIBEXT)
-	rm -f $(libdir)/liboctinterp.$(SHLEXT)
-	rm -f $(libdir)/liboctinterp.$(SHLEXT_VER)
+	rm -f $(octlibdir)/liboctinterp.$(LIBEXT)
+	rm -f $(octlibdir)/liboctinterp.$(SHLEXT)
+	rm -f $(octlibdir)/liboctinterp.$(SHLEXT_VER)
 	for f in $(INCLUDES) defaults.h oct-conf.h; do \
 	  rm -f $(octincludedir)/$$f; \
 	done
 .PHONY: uninstall
 
 tags: $(SOURCES) $(DLD_SRC)
 	ctags $(SOURCES) $(DLD_SRC)
 
 TAGS: $(SOURCES) $(DLD_SRC)
 	etags $(SOURCES) $(DLD_SRC)
 
 clean:
 	rm -f *.$(LIBEXT) *.o *.d *.df *.oct pic/*.o
 	rm -f builtins.cc ops.cc defaults.h oct-conf.h def-files var-files
+	-rmdir pic
 	if $(SHARED_LIBS); then rm -f *.$(SHLEXT_VER) *.$(SHLEXT); fi
 .PHONY: clean
 
 mostlyclean:
 	rm -f *.o pic/*.o
+	-rmdir pic
 .PHONY: mostlyclean
 
 distclean: clean
 	rm -f Makefile octave .fname so_locations
 	rm -f stamp-prereq
-	-rmdir pic
 .PHONY: distclean
 
 maintainer-clean: distclean
 	rm -f tags TAGS y.tab.c y.tab.h y.output yy.lex.c lex.cc parse.cc
 	rm -f oct-gperf.h stamp-prereq
-	-rmdir pic
 .PHONY: maintainer-clean
 
 dist: parse.cc lex.cc oct-gperf.h
 	ln $(DISTFILES) ../`cat ../.fname`/src
 	for f in DLD-FUNCTIONS OPERATORS TEMPLATE-INST; do \
 	  if [ -d ../`cat ../.fname`/src/$$f ]; then \
 	    true; \
 	  else \
diff --git a/src/data.cc b/src/data.cc
--- a/src/data.cc
+++ b/src/data.cc
@@ -1110,65 +1110,65 @@ treat_neg_dim_as_zero (void)
   Vtreat_neg_dim_as_zero = check_preference ("treat_neg_dim_as_zero");
 
   return 0;
 }
 
 void
 symbols_of_data (void)
 {
-  DEFCONST (I, Complex (0.0, 1.0), 0, 0,
+  DEFCONST (I, Complex (0.0, 1.0),
     "sqrt (-1)");
 
-  DEFCONST (Inf, octave_Inf, 0, 0,
+  DEFCONST (Inf, octave_Inf,
     "infinity");
 
-  DEFCONST (J, Complex (0.0, 1.0), 0, 0,
+  DEFCONST (J, Complex (0.0, 1.0),
     "sqrt (-1)");
 
-  DEFCONST (NaN, octave_NaN, 0, 0,
+  DEFCONST (NaN, octave_NaN,
     "not a number");
 
 #if defined (M_E)
   double e_val = M_E;
 #else
   double e_val = exp (1.0);
 #endif
 
-  DEFCONST (e, e_val, 0, 0,
+  DEFCONST (e, e_val,
     "exp (1)");
 
-  DEFCONST (eps, DBL_EPSILON, 0, 0,
+  DEFCONST (eps, DBL_EPSILON,
     "machine precision");
 
-  DEFCONST (i, Complex (0.0, 1.0), 1, 0,
+  DEFCONST (i, Complex (0.0, 1.0),
     "sqrt (-1)");
 
-  DEFCONST (inf, octave_Inf, 0, 0,
+  DEFCONST (inf, octave_Inf,
     "infinity");
 
-  DEFCONST (j, Complex (0.0, 1.0), 1, 0,
+  DEFCONST (j, Complex (0.0, 1.0),
     "sqrt (-1)");
 
-  DEFCONST (nan, octave_NaN, 0, 0,
+  DEFCONST (nan, octave_NaN,
     "not a number");
 
 #if defined (M_PI)
   double pi_val = M_PI;
 #else
   double pi_val = 4.0 * atan (1.0);
 #endif
 
-  DEFCONST (pi, pi_val, 0, 0,
+  DEFCONST (pi, pi_val,
     "ratio of the circumference of a circle to its diameter");
 
-  DEFCONST (realmax, DBL_MAX, 0, 0,
+  DEFCONST (realmax, DBL_MAX,
     "realmax (): return largest representable floating point number");
 
-  DEFCONST (realmin, DBL_MIN, 0, 0,
+  DEFCONST (realmin, DBL_MIN,
     "realmin (): return smallest representable floating point number");
 
   DEFVAR (treat_neg_dim_as_zero, 0.0, 0, treat_neg_dim_as_zero,
     "convert negative dimensions to zero");
 }
 
 /*
 ;;; Local Variables: ***
diff --git a/src/defaults.cc b/src/defaults.cc
--- a/src/defaults.cc
+++ b/src/defaults.cc
@@ -48,18 +48,19 @@ Software Foundation, 59 Temple Place - S
 #include "ov.h"
 #include "toplev.h"
 #include "variables.h"
 #include <version.h>
 
 string Voctave_home;
 
 string Vbin_dir;
-string Vlib_dir;
 string Vinfo_dir;
+string Vdata_dir;
+string Vlibexec_dir;
 string Varch_lib_dir;
 string Vlocal_arch_lib_dir;
 string Vfcn_file_dir;
 
 // The path that will be searched for programs that we execute.
 // (--exec-path path)
 string Vexec_path;
 
@@ -108,16 +109,28 @@ set_octave_home (void)
 
 static void
 set_default_info_dir (void)
 {
   Vinfo_dir = subst_octave_home (OCTAVE_INFODIR);
 }
 
 static void
+set_default_data_dir (void)
+{
+  Vdata_dir = subst_octave_home (OCTAVE_DATADIR);
+}
+
+static void
+set_default_libexec_dir (void)
+{
+  Vlibexec_dir = subst_octave_home (OCTAVE_LIBEXECDIR);
+}
+
+static void
 set_default_arch_lib_dir (void)
 {
   Varch_lib_dir = subst_octave_home (OCTAVE_ARCHLIBDIR);
 }
 
 static void
 set_default_local_arch_lib_dir (void)
 {
@@ -132,22 +145,16 @@ set_default_fcn_file_dir (void)
 
 static void
 set_default_bin_dir (void)
 {
   Vbin_dir = subst_octave_home (OCTAVE_BINDIR);
 }
 
 static void
-set_default_lib_dir (void)
-{
-  Vlib_dir = subst_octave_home (OCTAVE_LIBDIR);
-}
-
-static void
 set_default_exec_path (void)
 {
   string octave_exec_path = octave_env::getenv ("OCTAVE_EXEC_PATH");
 
   if (octave_exec_path.empty ())
     {
       string shell_path = octave_env::getenv ("PATH");
 
@@ -187,20 +194,17 @@ set_default_info_file (void)
 }
 
 static void
 set_default_info_prog (void)
 {
   string oct_info_prog = octave_env::getenv ("OCTAVE_INFO_PROGRAM");
 
   if (oct_info_prog.empty ())
-    {
-      Vinfo_prog = Varch_lib_dir;
-      Vinfo_prog.append ("/info");
-    }
+    Vinfo_prog = "info";
   else
     Vinfo_prog = string (oct_info_prog);
 }
 
 static void
 set_default_editor (void)
 {
   Veditor = "emacs";
@@ -253,26 +257,28 @@ void
 install_defaults (void)
 {
   // OCTAVE_HOME must be set first!
 
   set_octave_home ();
 
   set_default_info_dir ();
 
+  set_default_data_dir ();
+
+  set_default_libexec_dir ();
+
   set_default_arch_lib_dir ();
 
   set_default_local_arch_lib_dir ();
 
   set_default_fcn_file_dir ();
 
   set_default_bin_dir ();
 
-  set_default_lib_dir ();
-
   set_default_exec_path ();
 
   set_default_path ();
 
   set_default_info_file ();
 
   set_default_info_prog ();
 
@@ -312,19 +318,18 @@ exec_path (void)
     {
       gripe_invalid_value_specified ("EXEC_PATH");
       status = -1;
     }
   else
     {
       Vexec_path = s;
 
-      string std_path = Vlocal_arch_lib_dir;
-      std_path.append (SEPCHAR_STR);
-      std_path.append (Varch_lib_dir);
+      string std_path = Vlocal_arch_lib_dir + string (SEPCHAR_STR)
+	+ Varch_lib_dir + string (SEPCHAR_STR) + Vbin_dir;
 
       string path;
 
       int eplen = Vexec_path.length ();
 
       if (eplen > 0)
 	{
 	  bool prepend = (Vexec_path[0] == ':');
@@ -400,20 +405,20 @@ symbols_of_defaults (void)
     "colon separated list of directories to search for programs to run");
 
   DEFVAR (LOADPATH, Vload_path, 0, loadpath,
     "colon separated list of directories to search for scripts");
 
   DEFVAR (IMAGEPATH, OCTAVE_IMAGEPATH, 0, imagepath,
     "colon separated list of directories to search for image files");
 
-  DEFCONST (OCTAVE_HOME, Voctave_home, 0, 0,
+  DEFCONST (OCTAVE_HOME, Voctave_home,
     "top-level Octave installation directory");
 
-  DEFCONSTX ("OCTAVE_VERSION", SBV_OCTAVE_VERSION, OCTAVE_VERSION, 0, 0,
+  DEFCONSTX ("OCTAVE_VERSION", SBV_OCTAVE_VERSION, OCTAVE_VERSION,
     "Octave version");
 }
 
 /*
 ;;; Local Variables: ***
 ;;; mode: C++ ***
 ;;; End: ***
 */
diff --git a/src/defaults.h.in b/src/defaults.h.in
--- a/src/defaults.h.in
+++ b/src/defaults.h.in
@@ -37,20 +37,28 @@ Software Foundation, 59 Temple Place - S
 #ifndef OCTAVE_EXEC_PREFIX
 #define OCTAVE_EXEC_PREFIX %OCTAVE_EXEC_PREFIX%
 #endif
 
 #ifndef OCTAVE_DATADIR
 #define OCTAVE_DATADIR %OCTAVE_DATADIR%
 #endif
 
+#ifndef OCTAVE_LIBEXECDIR
+#define OCTAVE_LIBEXECDIR %OCTAVE_LIBEXECDIR%
+#endif
+
 #ifndef OCTAVE_LIBDIR
 #define OCTAVE_LIBDIR %OCTAVE_LIBDIR%
 #endif
 
+#ifndef OCTAVE_OCTLIBDIR
+#define OCTAVE_OCTLIBDIR %OCTAVE_OCTLIBDIR%
+#endif
+
 #ifndef OCTAVE_BINDIR
 #define OCTAVE_BINDIR %OCTAVE_BINDIR%
 #endif
 
 #ifndef OCTAVE_INFODIR
 #define OCTAVE_INFODIR %OCTAVE_INFODIR%
 #endif
 
@@ -104,18 +112,19 @@ Software Foundation, 59 Temple Place - S
 
 #ifndef TARGET_HOST_TYPE
 #define TARGET_HOST_TYPE %TARGET_HOST_TYPE%
 #endif
 
 extern string Voctave_home;
 
 extern string Vbin_dir;
-extern string Vlib_dir;
 extern string Vinfo_dir;
+extern string Vdata_dir;
+extern string Vlibexec_dir;
 extern string Varch_lib_dir;
 extern string Vlocal_arch_lib_dir;
 extern string Vfcn_file_dir;
 
 // The path that will be searched for programs that we execute.
 // (--exec-path path)
 extern string Vexec_path;
 
diff --git a/src/defun.h b/src/defun.h
--- a/src/defun.h
+++ b/src/defun.h
@@ -30,17 +30,17 @@ Software Foundation, 59 Temple Place - S
 #include "defun-int.h"
 
 // Define a builtin variable.
 //
 //   name is the name of the variable, unquoted.
 //
 //   defn is the initial value for the variable.
 //
-//   ins_as_fcn is a flag that says whether to install the variable as
+//   inst_as_fcn is a flag that says whether to install the variable as
 //     if it were a function (allowing the name to also be used as a
 //     variable by users, but recover its original definition if cleared).
 //
 //   protect is a flag that says whether it should be possible to give
 //     the variable a new value.
 //
 //   eternal is a flag that says whether it should be possible to
 //     clear the variable.  Most builtin variables are eternal, and
@@ -48,37 +48,36 @@ Software Foundation, 59 Temple Place - S
 //
 //   chg_fcn is a pointer to a function that should be called whenever
 //     this variable is given a new value.  It can be 0 if there is no
 //     function to call.  See also the code in user-prefs.cc.
 //
 //   doc is the simple help text for this variable.
 
 #define DEFVAR(name, defn, inst_as_fcn, chg_fcn, doc) \
-  DEFVAR_INTERNAL (#name, SBV_ ## name, defn, inst_as_fcn, 0, chg_fcn, doc)
+  DEFVAR_INTERNAL (#name, SBV_ ## name, defn, inst_as_fcn, false, chg_fcn, doc)
 
-// Define a builtin-constant, and a corresponding variable that can be
-// redefined.  This is just the same as DEFVAR, except that it defines
-// `name' as a variable, and `__name__' as a constant that cannot be
-// redefined.
+// Define a builtin-constant `__name__', and a corresponding variable
+// `name' that can be redefined.  (The variable is actually installed
+// in the symbol table as a function, so that it doesn't work like a
+// global variable when redefined.)
 
-#define DEFCONST(name, defn, inst_as_fcn, chg_fcn, doc) \
-  DEFVAR_INTERNAL (#name, SBV_ ## name, defn, inst_as_fcn, false, \
-		   chg_fcn, doc); \
+#define DEFCONST(name, defn, doc) \
+  DEFVAR_INTERNAL (#name, SBV_ ## name, defn, true, false, 0, doc); \
   DEFVAR_INTERNAL ("__" ## #name ## "__", XSBV_ ## name, defn, false, \
-		   true, chg_fcn, doc)
+		   true, 0, doc)
 
 // This one can be used when `name' cannot be used directly (if it is
 // already defined as a macro).  In that case, name is already a
 // quoted string, and the name of the structure has to be passed too.
 
-#define DEFCONSTX(name, sname, defn, inst_as_fcn, chg_fcn, doc) \
-  DEFVAR_INTERNAL (name, sname, defn, inst_as_fcn, false, chg_fcn, doc); \
+#define DEFCONSTX(name, sname, defn, doc) \
+  DEFVAR_INTERNAL (name, sname, defn, true, false, 0, doc); \
   DEFVAR_INTERNAL ("__" ## name ## "__", X ## sname, defn, false, true, \
-		   chg_fcn, doc)
+		   0, doc)
 
 // Define a builtin function.
 //
 //   name is the name of the function, unqouted.
 //
 //   args_name is the name of the octave_value_list variable used to pass
 //     the argument list to this function.
 //
diff --git a/src/error.cc b/src/error.cc
--- a/src/error.cc
+++ b/src/error.cc
@@ -321,17 +321,17 @@ beep_on_error (void)
 }
 
 void
 symbols_of_error (void)
 {
   DEFVAR (beep_on_error, 0.0, 0, beep_on_error,
     "if true, beep before printing error messages");
 
-  DEFCONST (error_text, "", 0, 0,
+  DEFCONST (error_text, "",
     "the text of error messages that would have been printed in the\n\
 body of the most recent unwind_protect statement or the TRY part of\n\
 the most recent eval() command.  Outside of unwind_protect and\n\
 eval(), or if no error has ocurred within them, the value of\n\
 __error_text__ is guaranteed to be the empty string.");
 }
 
 /*
diff --git a/src/file-io.cc b/src/file-io.cc
--- a/src/file-io.cc
+++ b/src/file-io.cc
@@ -1375,32 +1375,32 @@ printed.")
 }
 
 void
 symbols_of_file_io (void)
 {
   // NOTE: the values of SEEK_SET, SEEK_CUR, and SEEK_END have to be
   // this way for Matlab compatibility.
 
-  DEFCONST (SEEK_SET, -1.0, 0, 0,
+  DEFCONST (SEEK_SET, -1.0,
     "used with fseek to position file relative to the beginning");
 
-  DEFCONST (SEEK_CUR, 0.0, 0, 0,
+  DEFCONST (SEEK_CUR, 0.0,
     "used with fseek to position file relative to the current position");
 
-  DEFCONST (SEEK_END, 1.0, 0, 0,
+  DEFCONST (SEEK_END, 1.0,
     "used with fseek to position file relative to the end");
 
-  DEFCONSTX ("stdin", SBV_stdin, stdin_file, 0, 0,
+  DEFCONSTX ("stdin", SBV_stdin, stdin_file,
     "file number of the standard input stream");
 
-  DEFCONSTX ("stdout", SBV_stdout, stdout_file, 0, 0,
+  DEFCONSTX ("stdout", SBV_stdout, stdout_file,
     "file number of the standard output stream");
 
-  DEFCONSTX ("stderr", SBV_stderr, stderr_file, 0, 0,
+  DEFCONSTX ("stderr", SBV_stderr, stderr_file,
     "file number of the standard error stream");
 }
 
 /*
 ;;; Local Variables: ***
 ;;; mode: C++ ***
 ;;; End: ***
 */
diff --git a/src/help.cc b/src/help.cc
--- a/src/help.cc
+++ b/src/help.cc
@@ -448,17 +448,17 @@ print_symbol_type (ostream& os, symbol_r
       if (! fn.empty ())
 	{
 	  string ff = fcn_file_in_path (fn);
 
 	  ff = ff.length () > 0 ? ff : fn;
 
 	  if (print)
 	    os << name
-	       << " is the function defined from:\n"
+	       << " is the function defined from: "
 	       << ff << "\n";
 	  else
 	    retval = ff;
 	}
       else
 	{
 	  if (print)
 	    os << name << " is a user-defined function\n";
@@ -719,17 +719,17 @@ builtin_help (int argc, const string_vec
 	}
 
       string path = fcn_file_in_path (argv[i]);
 
       string h = get_help_from_file (path);
 
       if (! h.empty ())
 	{
-	  octave_stdout << argv[i] << " is the file:\n"
+	  octave_stdout << argv[i] << " is the file: "
 	    << path << "\n\n" << h << "\n";
 
 	  continue;
 	}
 
       octave_stdout << "\nhelp: sorry, `" << argv[i]
 		    << "' is not documented\n"; 
     }
@@ -826,17 +826,17 @@ display the definition of each NAME that
 		{
 		  elts = id.substr (pos+1);
 		  id = id.substr (0, pos);
 		}
 	    }
 
 	  symbol_record *sym_rec = lookup_by_name (id, 0);
 
-	  if (sym_rec)
+	  if (sym_rec && sym_rec->is_defined ())
 	    {
 	      if (sym_rec->is_user_function ())
 		{
 		  octave_value tmp = sym_rec->def ();
 		  
 		  octave_function *defn = tmp.function_value ();
 
 		  string fn = defn ? defn->fcn_file_name () : string ();
@@ -846,17 +846,17 @@ display the definition of each NAME that
 		  if (pr_orig_txt && ! ff.empty ())
 		    {
 		      ifstream fs (ff.c_str (), ios::in);
 
 		      if (fs)
 			{
 			  if (nargout == 0 && ! quiet)
 			    output_buf << argv[i]
-				       << " is the function defined from:\n"
+				       << " is the function defined from: "
 				       << ff << "\n\n";
 
 			  char ch;
 
 			  while (fs.get (ch))
 			    output_buf << ch;
 			}
 		      else
@@ -922,17 +922,41 @@ display the definition of each NAME that
 			    }
 			}
 		    }
 		}
 	      else
 		output_buf << "type: `" << argv[i] << "' has unknown type!\n";
 	    }
 	  else
-	    output_buf << "type: `" << argv[i] << "' undefined\n";
+	    {
+	      string ff = fcn_file_in_path (argv[i]);
+
+	      if (! ff.empty ())
+		{
+		  ifstream fs (ff.c_str (), ios::in);
+
+		  if (fs)
+		    {
+		      if (nargout == 0 && ! quiet)
+			output_buf << argv[i] << " is the script file: "
+				   << ff << "\n\n";
+
+		      char ch;
+
+		      while (fs.get (ch))
+			output_buf << ch;
+		    }
+		  else
+		    output_buf << "unable to open `" << ff
+			       << "' for reading!\n";
+		}
+	      else
+		output_buf << "type: `" << argv[i] << "' undefined\n";
+	    }
 	}
 
       output_buf << ends;
 
       char *s = output_buf.str ();
 
       if (nargout == 0)
 	octave_stdout << s;
@@ -966,31 +990,46 @@ file, print the full name of the file.")
     {
       if (nargout > 0)
 	retval.resize (argc-1, Matrix ());
 
       for (int i = 1; i < argc; i++)
 	{
 	  symbol_record *sym_rec = lookup_by_name (argv[i], 0);
 
-	  if (sym_rec)
+	  if (sym_rec && sym_rec->is_defined ())
 	    {
 	      int print = (nargout == 0);
 
 	      string tmp = print_symbol_type (octave_stdout, sym_rec,
 					      argv[i], print);
 	      if (! print)
 		retval(i) = tmp;
 	    }
 	  else
 	    {
-	      if (nargout == 0)
-		octave_stdout << "which: `" << argv[i] << "' is undefined\n";
+	      string path = fcn_file_in_path (argv[i]);
+
+	      if (! path.empty ())
+		{
+		  if (nargout == 0)
+		    octave_stdout << "which: `" << argv[i]
+				  << "' is the script file: "
+				  << path << "\n";
+		  else
+		    retval(i) = path;
+		}
 	      else
-		retval(i) = "undefined";
+		{
+		  if (nargout == 0)
+		    octave_stdout << "which: `" << argv[i]
+				  << "' is undefined\n";
+		  else
+		    retval(i) = "undefined";
+		}
 	    }
 	}
     }
   else
     print_usage ("which");
 
   return retval;
 }
diff --git a/src/octave.cc b/src/octave.cc
--- a/src/octave.cc
+++ b/src/octave.cc
@@ -165,32 +165,27 @@ intern_argv (int argc, char **argv)
 }
 
 static void
 initialize_pathsearch (void)
 {
   // This may seem odd, but doing it this way means that we don't have
   // to modify the kpathsea library...
 
-  string odb = octave_env::getenv ("OCTAVE_DB_DIR");
+  string odb = octave_env::getenv ("OCTAVE_DB_PATH");
+
+  // For backward compatibility.
 
   if (odb.empty ())
-    {
-      string oh = octave_env::getenv ("OCTAVE_HOME");
+    odb = octave_env::getenv ("OCTAVE_DB_DIR");
 
-      if (oh.empty ())
-	octave_env::putenv ("TEXMF", OCTAVE_DATADIR "/octave");
-      else  
-	{
-	  oh.append ("/lib/octave");
-	  octave_env::putenv ("TEXMF", oh);
-	}
-    }
-  else
-    octave_env::putenv ("TEXMF", odb);
+  if (odb.empty ())
+    odb = Vdata_dir + string ("/octave:") + Vlibexec_dir + string ("/octave");
+
+  octave_env::putenv ("TEXMFDBS", odb);
 }
 
 // Initialize by reading startup files.
 
 static void
 execute_startup_files (void)
 {
   unwind_protect::begin_frame ("execute_startup_files");
diff --git a/src/syscalls.cc b/src/syscalls.cc
--- a/src/syscalls.cc
+++ b/src/syscalls.cc
@@ -718,87 +718,87 @@ error message.")
 #if !defined (O_NONBLOCK) && defined (O_NDELAY)
 #define O_NONBLOCK O_NDELAY
 #endif
 
 void
 symbols_of_syscalls (void)
 {
 #if defined (F_DUPFD)
-  DEFCONST (F_DUPFD, static_cast<double> (F_DUPFD), 0, 0,
+  DEFCONST (F_DUPFD, static_cast<double> (F_DUPFD),
     "");
 #endif
 
 #if defined (F_GETFD)
-  DEFCONST (F_GETFD, static_cast<double> (F_GETFD), 0, 0,
+  DEFCONST (F_GETFD, static_cast<double> (F_GETFD),
     "");
 #endif
 
 #if defined (F_GETFL)
-  DEFCONST (F_GETFL, static_cast<double> (F_GETFL), 0, 0,
+  DEFCONST (F_GETFL, static_cast<double> (F_GETFL),
     "");
 #endif
 
 #if defined (F_SETFD)
-  DEFCONST (F_SETFD, static_cast<double> (F_SETFD), 0, 0,
+  DEFCONST (F_SETFD, static_cast<double> (F_SETFD),
     "");
 #endif
 
 #if defined (F_SETFL)
-  DEFCONST (F_SETFL, static_cast<double> (F_SETFL), 0, 0,
+  DEFCONST (F_SETFL, static_cast<double> (F_SETFL),
     "");
 #endif
 
 #if defined (O_APPEND)
-  DEFCONST (O_APPEND, static_cast<double> (O_APPEND), 0, 0,
+  DEFCONST (O_APPEND, static_cast<double> (O_APPEND),
     "");
 #endif
 
 #if defined (O_ASYNC)
-  DEFCONST (O_ASYNC, static_cast<double> (O_ASYNC), 0, 0,
+  DEFCONST (O_ASYNC, static_cast<double> (O_ASYNC),
     "");
 #endif
 
 #if defined (O_CREAT)
-  DEFCONST (O_CREAT, static_cast<double> (O_CREAT), 0, 0,
+  DEFCONST (O_CREAT, static_cast<double> (O_CREAT),
     "");
 #endif
 
 #if defined (O_EXCL)
-  DEFCONST (O_EXCL, static_cast<double> (O_EXCL), 0, 0,
+  DEFCONST (O_EXCL, static_cast<double> (O_EXCL),
     "");
 #endif
 
 #if defined (O_NONBLOCK)
-  DEFCONST (O_NONBLOCK, static_cast<double> (O_NONBLOCK), 0, 0,
+  DEFCONST (O_NONBLOCK, static_cast<double> (O_NONBLOCK),
     "");
 #endif
 
 #if defined (O_RDONLY)
-  DEFCONST (O_RDONLY, static_cast<double> (O_RDONLY), 0, 0,
+  DEFCONST (O_RDONLY, static_cast<double> (O_RDONLY),
     "");
 #endif
 
 #if defined (O_RDWR)
-  DEFCONST (O_RDWR, static_cast<double> (O_RDWR), 0, 0,
+  DEFCONST (O_RDWR, static_cast<double> (O_RDWR),
     "");
 #endif
 
 #if defined (O_SYNC)
-  DEFCONST (O_SYNC, static_cast<double> (O_SYNC), 0, 0,
+  DEFCONST (O_SYNC, static_cast<double> (O_SYNC),
     "");
 #endif
 
 #if defined (O_TRUNC)
-  DEFCONST (O_TRUNC, static_cast<double> (O_TRUNC), 0, 0,
+  DEFCONST (O_TRUNC, static_cast<double> (O_TRUNC),
     "");
 #endif
 
 #if defined (O_WRONLY)
-  DEFCONST (O_WRONLY, static_cast<double> (O_WRONLY), 0, 0,
+  DEFCONST (O_WRONLY, static_cast<double> (O_WRONLY),
     "");
 #endif
 }
 
 /*
 ;;; Local Variables: ***
 ;;; mode: C++ ***
 ;;; End: ***
diff --git a/src/toplev.cc b/src/toplev.cc
--- a/src/toplev.cc
+++ b/src/toplev.cc
@@ -536,16 +536,18 @@ information.")
 #if defined (WITH_DYNAMIC_LINKING) && (defined (WITH_DL) || defined (WITH_SHL))
   bool octave_supports_dynamic_linking = true;
 #else
   bool octave_supports_dynamic_linking = false;
 #endif
 
   Octave_map m;
 
+  // XXX FIXME XXX -- should we perform OCTAVE_HOME substitution on these?
+
   m ["default_pager"] = DEFAULT_PAGER;
   m ["prefix"] = OCTAVE_PREFIX;
   m ["exec_prefix"] = OCTAVE_EXEC_PREFIX;
   m ["datadir"] = OCTAVE_DATADIR;
   m ["dld"] = static_cast<double> (octave_supports_dynamic_linking);
   m ["libdir"] = OCTAVE_LIBDIR;
   m ["bindir"] = OCTAVE_BINDIR;
   m ["infodir"] = OCTAVE_INFODIR;
@@ -641,25 +643,25 @@ void
     free (ptr);
 }
 
 #endif
 
 void
 symbols_of_toplev (void)
 {
-  DEFCONST (argv, , 0, 0,
+  DEFCONST (argv, ,
     "the command line arguments this program was invoked with");
 
   DEFCONST (program_invocation_name,
-	    octave_env::get_program_invocation_name (), 0, 0,
+	    octave_env::get_program_invocation_name (),
     "the full name of the current program or script, including the\n\
 directory specification");
 
-  DEFCONST (program_name, octave_env::get_program_name (), 0, 0,
+  DEFCONST (program_name, octave_env::get_program_name (),
     "the name of the current program or script");
 }
 
 /*
 ;;; Local Variables: ***
 ;;; mode: C++ ***
 ;;; End: ***
 */
diff --git a/src/version.h b/src/version.h
--- a/src/version.h
+++ b/src/version.h
@@ -1,11 +1,11 @@
 /*
 
-Copyright (C) 1996, 1997 John W. Eaton
+Copyright (C) 1996, 1997, 1998 John W. Eaton
 
 This file is part of Octave.
 
 Octave is free software; you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published by the
 Free Software Foundation; either version 2, or (at your option) any
 later version.
 
@@ -21,17 +21,17 @@ Software Foundation, 59 Temple Place - S
 */
 
 #if !defined (octave_version_h)
 #define octave_version_h 1
 
 #define OCTAVE_VERSION "2.1.4"
 
 #define OCTAVE_COPYRIGHT \
-  "Copyright (C) 1996, 1997 John W. Eaton."
+  "Copyright (C) 1996, 1997, 1998 John W. Eaton."
 
 #define OCTAVE_NAME_AND_VERSION \
   "Octave, version " OCTAVE_VERSION " (" TARGET_HOST_TYPE ")"
 
 #define OCTAVE_NAME_VERSION_AND_COPYRIGHT \
   OCTAVE_NAME_AND_VERSION ".\n" OCTAVE_COPYRIGHT "\n\
 This is free software with ABSOLUTELY NO WARRANTY."
 
diff --git a/test/octave.test/system/pwd-2.m b/test/octave.test/system/pwd-2.m
deleted file mode 100644
--- a/test/octave.test/system/pwd-2.m
+++ /dev/null
@@ -1,1 +0,0 @@
-
