# HG changeset patch
# User Rik <rik@octave.org>
# Date 1450132497 28800
#      Mon Dec 14 14:34:57 2015 -0800
# Node ID 5e16d687a7018d78b4f9db9a22450bae4ea3d176
# Parent  7697a3433e377b4c7c5534775850368a650ff8ba
doc: Start help text with " -- ", not " -- : ".

* __makeinfo__.m: Use regexprep to replace " -- : " generated by Texinfo with
" -- ".

diff --git a/scripts/help/__makeinfo__.m b/scripts/help/__makeinfo__.m
--- a/scripts/help/__makeinfo__.m
+++ b/scripts/help/__makeinfo__.m
@@ -141,19 +141,23 @@ function [retval, status] = __makeinfo__
 
     ## Clean up extra newlines generated by makeinfo
     if (strcmpi (output_type, "plain text"))
       if (numel (retval) > 2 && retval(end-1:end) == "\n\n")
         retval = retval(1:end-2);
       endif
     endif
 
+    ## Clean up start of @deftypefn expansion which includes extra ':'
+    retval = regexprep (retval, '^ -- : +', ' -- ', "lineanchors");
+
   unwind_protect_cleanup
     if (exist (name, "file"))
       delete (name);
     endif
   end_unwind_protect
+
 endfunction
 
 
 ## No test needed for internal helper function.
 %!assert (1)
 
