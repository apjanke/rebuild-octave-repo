# HG changeset patch
# User jwe
# Date 1171624484 0
#      Fri Feb 16 11:14:44 2007 +0000
# Node ID e7e7c338bf996a0716d7b1531856edbe759e4c67
# Parent  bae85c1e0e2ad2f1dc5befef1550f210259d0060
[project @ 2007-02-16 11:14:44 by jwe]

diff --git a/ChangeLog b/ChangeLog
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,8 +1,16 @@
+2007-02-16  John W. Eaton  <jwe@octave.org>
+
+	* mkoctfile.in: Use OCTAVE_PREFIX, not OCTAVE_CONF_PREFIX, in sed
+	substitutions.
+	* octave-conf.in: Define DATAROOTDIR, not DATADIR, from
+	OCTAVE_DATAROOTDIR.
+	From Michael Goffioul <michael.goffioul@swing.be>.
+
 2007-02-15  John W. Eaton  <jwe@octave.org>
 
 	* octave-config.in (DATAROOTDIR): Include in list of vars.
 	Substitute OCTAVE_HOME.
 
 	* Makeconf.in (MKOCTFILE_INCFLAGS, MKOCTFILE_LFLAGS): Delete vars.
 	(do-subst-config-vals): Don't substitute them.
 	Also substitute OCTAVE_CONF_INCLUDEDIR, OCTAVE_CONF_OCTINCLUDEDIR,
diff --git a/mkoctfile.in b/mkoctfile.in
--- a/mkoctfile.in
+++ b/mkoctfile.in
@@ -12,19 +12,19 @@ set -e
 OCTAVE_VERSION=%OCTAVE_CONF_VERSION%
 OCTAVE_PREFIX=%OCTAVE_CONF_PREFIX%
 
 DEFAULT_OCTINCLUDEDIR=%OCTAVE_CONF_OCTINCLUDEDIR%
 DEFAULT_INCLUDEDIR=%OCTAVE_CONF_INCLUDEDIR%
 DEFAULT_OCTLIBDIR=%OCTAVE_CONF_OCTLIBDIR%
 
 if [ -n "$OCTAVE_HOME" ]; then
-  DEFAULT_OCTINCLUDEDIR="`echo $DEFAULT_OCTINCLUDEDIR | $SED "s,^$OCTAVE_CONF_PREFIX,$OCTAVE_HOME,"`"
-  DEFAULT_INCLUDEDIR="`echo $DEFAULT_INCLUDEDIR | $SED "s,^$OCTAVE_CONF_PREFIX,$OCTAVE_HOME,"`"
-  DEFAULT_OCTLIBDIR="`echo $DEFAULT_OCTLIBDIR | $SED "s,^$OCTAVE_CONF_PREFIX,$OCTAVE_HOME,"`"
+  DEFAULT_OCTINCLUDEDIR="`echo $DEFAULT_OCTINCLUDEDIR | $SED "s,^$OCTAVE_PREFIX,$OCTAVE_HOME,"`"
+  DEFAULT_INCLUDEDIR="`echo $DEFAULT_INCLUDEDIR | $SED "s,^$OCTAVE_PREFIX,$OCTAVE_HOME,"`"
+  DEFAULT_OCTLIBDIR="`echo $DEFAULT_OCTLIBDIR | $SED "s,^$OCTAVE_PREFIX,$OCTAVE_HOME,"`"
 fi
 
 : ${OCTINCLUDEDIR=$DEFAULT_OCTINCLUDEDIR}
 : ${INCLUDEDIR=$DEFAULT_INCLUDEDIR}
 : ${OCTLIBDIR=$DEFAULT_OCTLIBDIR}
 
 DEFAULT_INCFLAGS="-I$OCTINCLUDEDIR -I$OCTINCLUDEDIR/octave"
 if [ "$INCLUDEDIR" != /usr/include ]; then
diff --git a/octave-config.in b/octave-config.in
--- a/octave-config.in
+++ b/octave-config.in
@@ -6,17 +6,17 @@
 # This script is in the public domain
 
 API_VERSION=%OCTAVE_API_VERSION%
 CANONICAL_HOST_TYPE=%OCTAVE_CANONICAL_HOST_TYPE%
 DEFAULT_PAGER=%OCTAVE_DEFAULT_PAGER%
 ARCHLIBDIR=%OCTAVE_ARCHLIBDIR%
 BINDIR=%OCTAVE_BINDIR%
 DATADIR=%OCTAVE_DATADIR%
-DATADIR=%OCTAVE_DATAROOTDIR%
+DATAROOTDIR=%OCTAVE_DATAROOTDIR%
 EXEC_PREFIX=%OCTAVE_EXEC_PREFIX%
 FCNFILEDIR=%OCTAVE_FCNFILEDIR%
 IMAGEDIR=%OCTAVE_IMAGEDIR%
 INCLUDEDIR=%OCTAVE_INCLUDEDIR%
 INFODIR=%OCTAVE_INFODIR%
 INFOFILE=%OCTAVE_INFOFILE%
 LIBDIR=%OCTAVE_LIBDIR%
 LIBEXECDIR=%OCTAVE_LIBEXECDIR%
