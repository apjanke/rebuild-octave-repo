# HG changeset patch
# User Rik <rik@octave.org>
# Date 1547742532 28800
#      Thu Jan 17 08:28:52 2019 -0800
# Node ID 73654374b86f0c9a66866b31c3da19c2f1e56c12
# Parent  8bed6950dddef1a1c35cead76326223e5b4bc105
# Parent  bf05a7c16e9e014ecf36878fe1c7019e60eae531
maint: merge stable to default.

diff --git a/libgui/languages/ja_JP.ts b/libgui/languages/ja_JP.ts
--- a/libgui/languages/ja_JP.ts
+++ b/libgui/languages/ja_JP.ts
@@ -97,17 +97,17 @@
     <message>
         <location line="+5"/>
         <source>Select All</source>
         <translation>全てを選択</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Run Selection</source>
-        <translation type="unfinished">選択部を実行</translation>
+        <translation>選択部を実行</translation>
     </message>
     <message>
         <location line="+7"/>
         <source>Clear Window</source>
         <translation>ウィンドウをクリア</translation>
     </message>
     <message>
         <location filename="../qterminal/libqterminal/QTerminal.cc" line="+49"/>
@@ -369,22 +369,22 @@
     <message>
         <location line="+3"/>
         <source>Inactive unclosed string</source>
         <translation>閉じられていない文字列をインアクティブ</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>C# verbatim string</source>
-        <translation type="unfinished"></translation>
+        <translation>C# verbatim 文字列</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Inactive C# verbatim string</source>
-        <translation type="unfinished"></translation>
+        <translation>C# verbatim 文字列をインアクティブ</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>JavaScript regular expression</source>
         <translation>JavaScript の正規表現</translation>
     </message>
     <message>
         <location line="+3"/>
@@ -603,17 +603,17 @@
     <message>
         <location line="+3"/>
         <source>Array</source>
         <translation>配列</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Hash</source>
-        <translation>ハッシ</translation>
+        <translation>ハッシュ</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Symbol table</source>
         <translation>シンボルテーブル</translation>
     </message>
     <message>
         <location line="+3"/>
@@ -1040,46 +1040,49 @@
         <source>Octave Documentation</source>
         <translation>Octave ドキュメント</translation>
     </message>
     <message>
         <location line="-624"/>
         <source>Could not copy help collection to temporary
 file. Search capabilities may be affected.
 %1</source>
-        <translation type="unfinished"></translation>
+        <translation>ヘルプコレクション一時ファイルびコピーできませんでした．
+検索機能に影響があるかもしれません．
+%1</translation>
     </message>
     <message>
         <location line="+12"/>
         <source>Could not setup the data required for the
 documentation viewer. Only help texts in
 the Command Window will be available.</source>
-        <translation type="unfinished"></translation>
+        <translation>ドキュメントビューワーに必要なデータを
+設定できませんでした．コマンドウィンドウのヘルプテキストのみが使用可能です．</translation>
     </message>
     <message>
         <location line="+21"/>
         <source>Find:</source>
-        <translation type="unfinished"></translation>
+        <translation>検索:</translation>
     </message>
     <message>
         <location line="+7"/>
         <location line="+1"/>
         <source>Search forward</source>
-        <translation type="unfinished"></translation>
+        <translation>前方検索</translation>
     </message>
     <message>
         <location line="+5"/>
         <location line="+1"/>
         <source>Search backward</source>
-        <translation type="unfinished"></translation>
+        <translation>後方検索</translation>
     </message>
     <message>
         <location line="+74"/>
         <source>Function Index</source>
-        <translation type="unfinished"></translation>
+        <translation>関数インデックス</translation>
     </message>
     <message>
         <location line="+98"/>
         <source>Go home</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+3"/>
@@ -1089,27 +1092,27 @@ the Command Window will be available.</s
     <message>
         <location line="+14"/>
         <source>Go forward</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+43"/>
         <source>Find</source>
-        <translation type="unfinished">検索</translation>
+        <translation>検索</translation>
     </message>
     <message>
         <location line="+6"/>
         <source>Zoom in</source>
-        <translation type="unfinished"></translation>
+        <translation>ズームイン</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Zoom out</source>
-        <translation type="unfinished"></translation>
+        <translation>ズームアウト</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Zoom original</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="-206"/>
@@ -1125,27 +1128,27 @@ the Command Window will be available.</s
         <location line="+10"/>
         <location line="+39"/>
         <source>Search</source>
         <translation>検索</translation>
     </message>
     <message>
         <location line="+84"/>
         <source>Previous pages</source>
-        <translation type="unfinished"></translation>
+        <translation>前のページ</translation>
     </message>
     <message>
         <location line="+14"/>
         <source>Next pages</source>
-        <translation type="unfinished"></translation>
+        <translation>次のページ</translation>
     </message>
     <message>
         <location line="+383"/>
         <source>Unable to register help file %1.</source>
-        <translation type="unfinished"></translation>
+        <translation type="unfinished">ヘルプファイル %1 を登録できません．</translation>
     </message>
 </context>
 <context>
     <name>octave::documentation_dock_widget</name>
     <message>
         <location filename="../src/documentation-dock-widget.cc" line="+38"/>
         <source>Documentation</source>
         <translation>ドキュメント</translation>
@@ -1156,27 +1159,27 @@ the Command Window will be available.</s
         <translation>ヘルプとしてドキュメントを見る</translation>
     </message>
 </context>
 <context>
     <name>octave::dw_main_window</name>
     <message>
         <location filename="../src/dw-main-window.cc" line="+49"/>
         <source>&amp;Close</source>
-        <translation type="unfinished">閉じる (&amp;C)</translation>
+        <translation>閉じる (&amp;C)</translation>
     </message>
     <message>
         <location line="+6"/>
         <source>Close &amp;All</source>
-        <translation type="unfinished"></translation>
+        <translation>全てを閉じる (&amp;A)</translation>
     </message>
     <message>
         <location line="+6"/>
         <source>Close &amp;Other</source>
-        <translation type="unfinished"></translation>
+        <translation>他を閉じる (&amp;O)</translation>
     </message>
     <message>
         <location line="+4"/>
         <source>Switch to &amp;Left Widget</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+4"/>
@@ -1730,48 +1733,54 @@ is about to be closed but has been modif
     </message>
     <message>
         <location line="+126"/>
         <source>There were problems reading the file
 %1
 with the selected encoding %2.
 
 Modifying and saving the file might cause data loss!</source>
-        <translation type="unfinished"></translation>
+        <translation>選択されたエンコード %2 でファイル %1 を読み込む時に
+問題が生じました．
+
+修正して保存するをデータが失われるかもしれません !</translation>
     </message>
     <message>
         <location line="+10"/>
         <source>&amp;Edit anyway</source>
-        <translation type="unfinished"></translation>
+        <translation>編集を強行 (&amp;E)</translation>
     </message>
     <message>
         <location line="+1"/>
         <location line="+57"/>
         <source>Chan&amp;ge encoding</source>
-        <translation type="unfinished"></translation>
+        <translation type="unfinished">エンコードの変更 (&amp;g)</translation>
     </message>
     <message>
         <location line="-56"/>
         <location line="+49"/>
         <source>&amp;Close</source>
-        <translation type="unfinished">閉じる (&amp;C)</translation>
+        <translation>閉じる (&amp;C)</translation>
     </message>
     <message>
         <location line="+11"/>
         <source>Select new default encoding</source>
-        <translation type="unfinished"></translation>
+        <translation>新しい既定を選択</translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Please select a new encoding
 for reloading the current file.
 
 This does not change the default encoding.
 </source>
-        <translation type="unfinished"></translation>
+        <translation type="unfinished">現在のファイルをリロードするための新しいエンコード
+選択してください．
+
+これは既定のエンコードに影響を与えません．</translation>
     </message>
     <message>
         <location line="+212"/>
         <source>Debug or Save</source>
         <translation>デバッグまたは保存</translation>
     </message>
     <message>
         <location line="+1"/>
@@ -1787,26 +1796,31 @@ Quit debugging and save?</source>
 %2.</translation>
     </message>
     <message>
         <location line="+182"/>
         <source>The current encoding %1
 can not be applied.
 
 Please select another one!</source>
-        <translation type="unfinished"></translation>
+        <translation>現在のエンコード %1
+は適用できません．
+
+他のエンコードを選択してください !</translation>
     </message>
     <message>
         <location line="+11"/>
         <source>The current editor contents can not be encoded
 with the selected encoding %1.
 Using it would result in data loss!
 
 Please select another one!</source>
-        <translation type="unfinished"></translation>
+        <translation>現在のエディタの内容は選択されたエンコード %1 ではエンコードできません．
+このままではデータが消失します !
+他のエンコードを選択してください !</translation>
     </message>
     <message>
         <location line="-115"/>
         <source>Octave Files (*.m)</source>
         <translation>Octave のファイル (*.m)</translation>
     </message>
     <message>
         <location line="+1"/>
@@ -1817,17 +1831,23 @@ Please select another one!</source>
         <location line="+76"/>
         <source>&quot;%1&quot;
 is not a valid identifier.
 
 If you keep this filename, you will not be able to
 call your script using its name as an Octave command.
 
 Do you want to choose another name?</source>
-        <translation type="unfinished"></translation>
+        <translation>&quot;%1&quot;
+は正しい identifier ではありません．
+
+もしこのファイル名のままにすれば, スクリプトをこの名前で
+Octave のコマンドとしてコールできません．.
+
+他の名前を選択しますか ?</translation>
     </message>
     <message>
         <location line="+135"/>
         <source>It seems that &apos;%1&apos; has been modified by another application. Do you want to reload it?</source>
         <translation>&apos;%1&apos; は他のアプリケーションで変更されたいます．再読込しますか？</translation>
     </message>
     <message>
         <location line="+29"/>
@@ -1946,17 +1966,17 @@ has been deleted or renamed. Do you want
         <location line="-381"/>
         <location line="+384"/>
         <source>New Directory...</source>
         <translation>新規のディレクトリ...</translation>
     </message>
     <message>
         <location line="-329"/>
         <source>Double-click to open file/folder, right click for alternatives</source>
-        <translation type="unfinished"></translation>
+        <translation>ダブルクリックでファイル / フォルダを開く，右クリックでオルタナティブ</translation>
     </message>
     <message>
         <location line="+282"/>
         <source>Open</source>
         <translation>開く</translation>
     </message>
     <message>
         <location line="+5"/>
@@ -2439,17 +2459,17 @@ a:link { text-decoration: underline; col
     <message>
         <location line="+3"/>
         <source>Show filter</source>
         <translation>フィルタを表示</translation>
     </message>
     <message>
         <location line="+121"/>
         <source>Double-click a command to transfer it to the Command Window.</source>
-        <translation type="unfinished"></translation>
+        <translation>ダブルクリックでコマンドをコマンドウィンドウに移します．</translation>
     </message>
     <message>
         <location line="+8"/>
         <source>Enter text to filter the command history</source>
         <translation>コマンドヒストリをフィルタするためのテキストを入力</translation>
     </message>
     <message>
         <location line="+10"/>
@@ -2576,17 +2596,18 @@ Click &apos;Next&apos; to create a confi
 </source>
         <translation>新しい関数の名前:
 </translation>
     </message>
     <message>
         <location line="+44"/>
         <source>%1 is a built-in, compiled or inline
 function and can not be edited.</source>
-        <translation type="unfinished"></translation>
+        <translation>%1 は組み込み, コンパイルされた, またはインライン関数であり，
+編集できません．</translation>
     </message>
     <message>
         <location line="+40"/>
         <source>Can not find function %1</source>
         <translation>関数 %1 が見つかりません</translation>
     </message>
     <message>
         <location line="+9"/>
@@ -3119,30 +3140,30 @@ Octave GUI はすぐ閉じられます．</translation>
     <message>
         <location line="+503"/>
         <source>Enable attribute colors</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+3"/>
         <source>Hide tools tips</source>
-        <translation type="unfinished"></translation>
+        <translation>ツールのティップスを隠す</translation>
     </message>
 </context>
 <context>
     <name>octave::setup_community_news</name>
     <message>
         <location filename="../src/welcome-wizard.cc" line="+42"/>
         <source>Community News</source>
         <translation>コミュニティーニュース</translation>
     </message>
     <message>
         <location line="+5"/>
         <source>Previous</source>
-        <translation></translation>
+        <translation>前</translation>
     </message>
     <message>
         <location line="+1"/>
         <source>Next</source>
         <translation>次</translation>
     </message>
     <message>
         <location line="+1"/>
@@ -3456,22 +3477,22 @@ Do you want to use the shortcut anyhow r
     <message>
         <location line="+2"/>
         <source>Switch to Right Tab</source>
         <translation>右タブに切替</translation>
     </message>
     <message>
         <location line="+2"/>
         <source>Move Tab Left</source>
-        <translation type="unfinished"></translation>
+        <translation>左タブに移動</translation>
     </message>
     <message>
         <location line="+2"/>
         <source>Move Tab Right</source>
-        <translation type="unfinished"></translation>
+        <translation>右タブに移動</translation>
     </message>
     <message>
         <location line="+17"/>
         <source>Edit Function</source>
         <translation>関数の編集</translation>
     </message>
     <message>
         <location line="+2"/>
@@ -3698,32 +3719,32 @@ Do you want to use the shortcut anyhow r
     <message>
         <location line="+2"/>
         <source>Show Horizontal Scrollbar</source>
         <translation>縦スクロールバーの表示</translation>
     </message>
     <message>
         <location line="+154"/>
         <source>Documentation Viewer</source>
-        <translation type="unfinished"></translation>
+        <translation>ドキュメントビューワー</translation>
     </message>
     <message>
         <location line="+4"/>
         <source>Browser</source>
-        <translation type="unfinished"></translation>
+        <translation>ブラウザ</translation>
     </message>
     <message>
         <location line="+79"/>
         <source>Import shortcuts from file...</source>
-        <translation type="unfinished"></translation>
+        <translation>ファイルからショートカットをインポート</translation>
     </message>
     <message>
         <location line="+5"/>
-        <source>Export shortcuts to file...</source>
-        <translation type="unfinished"></translation>
+        <source>ファイルへショートカットをエキスポート</source>
+        <translation></translation>
     </message>
     <message>
         <location line="+11"/>
         <source>Failed to open %1 as Octave shortcut file</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="-367"/>
@@ -3779,27 +3800,27 @@ Do you want to use the shortcut anyhow r
     <message>
         <location line="+2"/>
         <source>Document on Keyword</source>
         <translation>キーワードでドキュメント</translation>
     </message>
     <message>
         <location line="+5"/>
         <source>Go to Homepage</source>
-        <translation type="unfinished"></translation>
+        <translation>ホームページへ</translation>
     </message>
     <message>
         <location line="+2"/>
         <source>Go Back one Page</source>
-        <translation type="unfinished"></translation>
+        <translation>1 ページ戻る</translation>
     </message>
     <message>
         <location line="+1"/>
         <source>Go Forward one Page</source>
-        <translation type="unfinished"></translation>
+        <translation>1 ページ進む</translation>
     </message>
     <message>
         <location line="+68"/>
         <source>Global</source>
         <translation>グローバル</translation>
     </message>
     <message>
         <location line="+3"/>
@@ -3838,22 +3859,22 @@ Do you want to use the shortcut anyhow r
     <message>
         <location line="+2"/>
         <source>Tab Handling in Dock Widgets</source>
         <translation>ドックウィジェットでタブの操作</translation>
     </message>
     <message>
         <location line="+2"/>
         <source>Find &amp; Replace in Dock Widgets</source>
-        <translation type="unfinished"></translation>
+        <translation>ドックウィジェットで検索と置換</translation>
     </message>
     <message>
         <location line="+2"/>
         <source>Zooming in Editor and Documentation</source>
-        <translation type="unfinished"></translation>
+        <translation>エディタとドキュメントでズーム</translation>
     </message>
     <message>
         <location line="+21"/>
         <source>View Menu</source>
         <translation>ビューメニュー</translation>
     </message>
     <message>
         <location line="+4"/>
@@ -3965,27 +3986,27 @@ Would you like to save the current short
     <message>
         <location line="+1"/>
         <source>Background</source>
         <translation type="unfinished">背景</translation>
     </message>
     <message>
         <location line="+1"/>
         <source>Selected Foreground</source>
-        <translation type="unfinished"></translation>
+        <translation>選択された前景</translation>
     </message>
     <message>
         <location line="+1"/>
         <source>Selected Background</source>
-        <translation type="unfinished"></translation>
+        <translation>選択された後景</translation>
     </message>
     <message>
         <location line="+1"/>
         <source>Alternate Background</source>
-        <translation type="unfinished"></translation>
+        <translation>後景をオルタネート</translation>
     </message>
     <message>
         <location line="+273"/>
         <source>Variable Editor Toolbar</source>
         <translation>変数エディタのツールバー</translation>
     </message>
     <message>
         <location line="+4"/>
@@ -4572,72 +4593,72 @@ Would you like to save the current short
     <message>
         <location line="-151"/>
         <source>Preferences</source>
         <translation type="unfinished">設定</translation>
     </message>
     <message>
         <location line="+57"/>
         <source>(requires restart)</source>
-        <translation type="unfinished"></translation>
+        <translation>(要再起動)</translation>
     </message>
     <message>
         <location line="+32"/>
         <source>Use native file dialogs</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+53"/>
         <source>Use system icon theme if available (requires restart)</source>
-        <translation type="unfinished"></translation>
+        <translation>使用可能ならシステムのアイコンテーマを使用</translation>
     </message>
     <message>
         <location line="+70"/>
         <source>Toolbar Icons</source>
-        <translation type="unfinished"></translation>
+        <translation>ツールバーアイコン</translation>
     </message>
     <message>
         <location line="+186"/>
         <source>Language</source>
-        <translation type="unfinished"></translation>
+        <translation>言語</translation>
     </message>
     <message>
         <location line="+27"/>
         <source>Style</source>
-        <translation type="unfinished"></translation>
+        <translation>スタイル</translation>
     </message>
     <message>
         <location line="+27"/>
         <source>Initial working directory of Octave interpreter</source>
-        <translation type="unfinished"></translation>
+        <translation>Octave インタープリタの初期された作業ディレクトリ</translation>
     </message>
     <message>
         <location line="+18"/>
         <source>Restore last working directory of previous session</source>
-        <translation type="unfinished"></translation>
+        <translation >前のセッションの作業ディレクトリをリストア</translation>
     </message>
     <message>
         <location line="+45"/>
         <source>Command</source>
-        <translation type="unfinished">コマンド</translation>
+        <translation>コマンド</translation>
     </message>
     <message>
         <location line="+208"/>
         <source>Set focus to Command Window when running a command from within another widget</source>
-        <translation type="unfinished"></translation>
+        <translation>他のウィジェットからコマンドが操作中のコマンドウィンドウにフォーカスをセット</translation>
     </message>
     <message>
         <location line="+7"/>
         <source>Print debug location in Command Window in addition to the marker in the editor</source>
-        <translation type="unfinished"></translation>
+        <translation>エディタ中のマーカーに加えたコマンドウィンドウ中にデバッグの位置を表示</translation>
     </message>
     <message>
         <location line="+16"/>
         <source>Command Window Colors</source>
-        <translation type="unfinished"></translation>
+        <translation>コマンドウィンドウのカラー</translation>
     </message>
     <message>
         <location line="+172"/>
         <source>Show complete path in title</source>
         <translation>完全なパスを表示</translation>
     </message>
     <message>
         <location line="+131"/>
@@ -4717,17 +4738,17 @@ Would you like to save the current short
     <message>
         <location line="+5"/>
         <source>&quot;end&quot;</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+238"/>
         <source>Debugging</source>
-        <translation type="unfinished"></translation>
+        <translation>デバッグ</translation>
     </message>
     <message>
         <location line="+8"/>
         <source>Always show debug breakpoints and pointers (opens related file if closed)</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+47"/>
@@ -4753,17 +4774,17 @@ Would you like to save the current short
     <message>
         <location line="-245"/>
         <source>File Browser</source>
         <translation>ファイルブラウザ</translation>
     </message>
     <message>
         <location line="+75"/>
         <source>Initial file browser directory (only if not synchronized with initial working directory of Octave)</source>
-        <translation type="unfinished"></translation>
+        <translation>初期のファイルブラウザのディレクトリ（Octave の初期作業ディレクトリとシンクロしないとき）</translation>
     </message>
     <message>
         <location line="+75"/>
         <source>Workspace</source>
         <translation>ワークスペース</translation>
     </message>
     <message>
         <location line="+35"/>
@@ -4864,17 +4885,17 @@ Would you like to save the current short
     <message>
         <location line="+12"/>
         <source>Use alternating row colors</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location line="+59"/>
         <source>Disable global shortcuts when Command Window has focus</source>
-        <translation type="unfinished"></translation>
+        <translation>コマンドウィンドウフォーカス時大域的なショートカットを使用しない</translation>
     </message>
     <message>
         <location line="+211"/>
         <source>HttpProxy</source>
         <translation>HTTP プロキシ</translation>
     </message>
     <message>
         <location line="-2559"/>
diff --git a/libinterp/corefcn/find.cc b/libinterp/corefcn/find.cc
--- a/libinterp/corefcn/find.cc
+++ b/libinterp/corefcn/find.cc
@@ -403,18 +403,16 @@ b = sparse (i, j, v, sz(1), sz(2));
       else if (! octave::math::isinf (val))
         n_to_find = val;
     }
 
   // Direction to do the searching (1 == forward, -1 == reverse).
   int direction = 1;
   if (nargin > 2)
     {
-      direction = 0;
-
       std::string s_arg = args(2).string_value ();
 
       if (s_arg == "first")
         direction = 1;
       else if (s_arg == "last")
         direction = -1;
       else
         error (R"(find: DIRECTION must be "first" or "last")");
diff --git a/libinterp/corefcn/gl-render.cc b/libinterp/corefcn/gl-render.cc
--- a/libinterp/corefcn/gl-render.cc
+++ b/libinterp/corefcn/gl-render.cc
@@ -3870,20 +3870,20 @@ namespace octave
 
     ColumnVector vp_lim_min =
       xform.untransform (std::numeric_limits <float>::epsilon (),
                          std::numeric_limits <float>::epsilon ());
     ColumnVector vp_lim_max = xform.untransform (vp(2), vp(3));
 
     if (vp_lim_min(0) > vp_lim_max(0))
       std::swap (vp_lim_min(0), vp_lim_max(0));
-        
+
     if (vp_lim_min(1) > vp_lim_max(1))
       std::swap (vp_lim_min(1), vp_lim_max(1));
-        
+
     float clip_xmin =
       (do_clip ? (vp_lim_min(0) > xmin ? vp_lim_min(0) : xmin) : vp_lim_min(0));
     float clip_ymin =
       (do_clip ? (vp_lim_min(1) > ymin ? vp_lim_min(1) : ymin) : vp_lim_min(1));
 
     float clip_xmax =
       (do_clip ? (vp_lim_max(0) < xmax ? vp_lim_max(0) : xmax) : vp_lim_max(0));
     float clip_ymax =
@@ -4241,31 +4241,36 @@ namespace octave
   }
 
   void
   opengl_renderer::set_linestyle (const std::string& s, bool use_stipple,
                                   double linewidth)
   {
 #if defined (HAVE_OPENGL)
 
+    int factor = math::round (linewidth * m_devpixratio);
+    if (factor < 1)
+      factor = 1;
+
+    uint16_t pattern = 0xFFFF;
+
     bool solid = false;
 
     if (s == "-")
-      {
-        m_glfcns.glLineStipple (1, static_cast<unsigned short> (0xFFFF));
-        solid = true;
-      }
+      solid = true;
     else if (s == ":")
-      m_glfcns.glLineStipple (linewidth, static_cast<unsigned short> (0x5555));
+      pattern = 0x5555;
     else if (s == "--")
-      m_glfcns.glLineStipple (linewidth, static_cast<unsigned short> (0x0F0F));
+      pattern = 0x0F0F;
     else if (s == "-.")
-      m_glfcns.glLineStipple (linewidth, static_cast<unsigned short> (0x6F6F));
+      pattern = 0x6F6F;
     else
-      m_glfcns.glLineStipple (1, static_cast<unsigned short> (0x0000));
+      pattern = 0x0000;
+
+    m_glfcns.glLineStipple (factor, pattern);
 
     if (solid && ! use_stipple)
       m_glfcns.glDisable (GL_LINE_STIPPLE);
     else
       m_glfcns.glEnable (GL_LINE_STIPPLE);
 
 #else
 
diff --git a/libinterp/corefcn/oct-map.cc b/libinterp/corefcn/oct-map.cc
--- a/libinterp/corefcn/oct-map.cc
+++ b/libinterp/corefcn/oct-map.cc
@@ -119,29 +119,26 @@ octave_fields::orderfields (Array<octave
       perm(i++) = j;
     }
 }
 
 bool
 octave_fields::equal_up_to_order (const octave_fields& other,
                                   octave_idx_type *perm) const
 {
-  bool retval = true;
+  bool retval;
 
   auto p = begin ();
   auto q = other.begin ();
   for (; p != end () && q != other.end (); p++, q++)
     {
       if (p->first == q->first)
         perm[p->second] = q->second;
       else
-        {
-          retval = false;
-          break;
-        }
+        return false;
     }
 
   retval = (p == end () && q == other.end ());
 
   return retval;
 }
 
 bool
diff --git a/libinterp/corefcn/oct-stream.cc b/libinterp/corefcn/oct-stream.cc
--- a/libinterp/corefcn/oct-stream.cc
+++ b/libinterp/corefcn/oct-stream.cc
@@ -909,17 +909,16 @@ namespace octave
                 {
                   args = 0;
                   flags = "";
                   fw = -1;
                   prec = -1;
                   modifier = '\0';
                   type = '\0';
                   buf << s[i++];
-                  empty_buf = false;
                 }
                 break;
               }
 
             if (nconv < 0)
               {
                 have_more = false;
                 break;
@@ -2988,18 +2987,18 @@ namespace octave
                         break;
                       }
                   }
               }
           }
 
         if (! is.eof () && ! as_empty)
           {
-            state = is.rdstate ();        // before tellg, since that fails at EOF
-            pos = is.tellg ();
+            state = is.rdstate ();   // before tellg, since that fails at EOF
+
             ch = is.peek ();   // ch == EOF if read failed; no need to chk fail
             if (ch == 'i' || ch == 'j')           // pure imaginary
               {
                 is.get ();
                 im = re;
                 re = 0;
               }
             else if (ch == '+' || ch == '-')      // see if it is real+imag[ij]
diff --git a/libinterp/corefcn/regexp.cc b/libinterp/corefcn/regexp.cc
--- a/libinterp/corefcn/regexp.cc
+++ b/libinterp/corefcn/regexp.cc
@@ -102,17 +102,16 @@ do_regexp_ptn_string_escapes (const std:
                   int digit = s[k] - '0';
                   if (digit < 0 || digit > 7)
                     break;
                   tmpi <<= 3;
                   tmpi += digit;
                 }
               if (bad_esc_seq || (brace && s[k++] != '}'))
                 {
-                  bad_esc_seq = true;
                   tmpi = 0;
                   warning (R"(malformed octal escape sequence '\o' -- converting to '\0')");
                 }
               retval[i] = tmpi;
               j = k - 1;
               break;
             }
 
diff --git a/libinterp/octave-value/ov-java.cc b/libinterp/octave-value/ov-java.cc
--- a/libinterp/octave-value/ov-java.cc
+++ b/libinterp/octave-value/ov-java.cc
@@ -1806,17 +1806,16 @@ unbox (JNIEnv *jni_env, const octave_val
                                       (m.fortran_vec ()));
           jmethodID mID = jni_env->GetMethodID (mcls, "<init>", "([I[I)V");
           jobj = jni_env->NewObject
             (jclass (mcls), mID, jintArray (v), jintArray (iv));
           jcls = jni_env->GetObjectClass (jobj);
         }
       else
         {
-          found = false;
           error ("cannot convert matrix of type '%s'",
                  val.class_name ().c_str ());
         }
     }
   else
     {
       jclass rcls = find_octave_class (jni_env, "org/octave/OctaveReference");
       jmethodID mID = jni_env->GetMethodID (rcls, "<init>", "(I)V");
diff --git a/liboctave/array/dSparse.cc b/liboctave/array/dSparse.cc
--- a/liboctave/array/dSparse.cc
+++ b/liboctave/array/dSparse.cc
@@ -4712,19 +4712,20 @@ SparseMatrix::bsolve (MatrixType& mattyp
           for (octave_idx_type j = 0; j < nc; j++)
             for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
               m_band(ridx (i) - j + n_lower + n_upper, j) = data (i);
 
           // Calculate the norm of the matrix, for later use.
           double anorm;
           if (calc_cond)
             {
+              anorm = 0.0;
               for (octave_idx_type j = 0; j < nr; j++)
                 {
-                  double atmp = 0.;
+                  double atmp = 0.0;
                   for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
                     atmp += fabs (data (i));
                   if (atmp > anorm)
                     anorm = atmp;
                 }
             }
 
           F77_INT tmp_nr = octave::to_f77_int (nr);
@@ -5051,19 +5052,20 @@ SparseMatrix::bsolve (MatrixType& mattyp
           for (octave_idx_type j = 0; j < nc; j++)
             for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
               m_band(ridx (i) - j + n_lower + n_upper, j) = data (i);
 
           // Calculate the norm of the matrix, for later use.
           double anorm;
           if (calc_cond)
             {
+              anorm = 0.0;
               for (octave_idx_type j = 0; j < nr; j++)
                 {
-                  double atmp = 0.;
+                  double atmp = 0.0;
                   for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
                     atmp += fabs (data (i));
                   if (atmp > anorm)
                     anorm = atmp;
                 }
             }
 
           F77_INT tmp_nr = octave::to_f77_int (nr);
@@ -5405,19 +5407,20 @@ SparseMatrix::bsolve (MatrixType& mattyp
           for (octave_idx_type j = 0; j < nc; j++)
             for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
               m_band(ridx (i) - j + n_lower + n_upper, j) = data (i);
 
           // Calculate the norm of the matrix, for later use.
           double anorm;
           if (calc_cond)
             {
+              anorm = 0.0;
               for (octave_idx_type j = 0; j < nr; j++)
                 {
-                  double atmp = 0.;
+                  double atmp = 0.0;
                   for (octave_idx_type i = cidx (j); i < cidx (j+1); i++)
                     atmp += fabs (data (i));
                   if (atmp > anorm)
                     anorm = atmp;
                 }
             }
 
           F77_INT tmp_nr = octave::to_f77_int (nr);
diff --git a/scripts/plot/util/print.m b/scripts/plot/util/print.m
--- a/scripts/plot/util/print.m
+++ b/scripts/plot/util/print.m
@@ -111,16 +111,17 @@
 ##
 ## @item  -opengl
 ## @itemx -painters
 ##   Specifies whether the opengl (pixel-based) or painters (vector-based)
 ## renderer is used.  This is equivalent to changing the figure's
 ## @qcode{"Renderer"} property.  When the figure @code{RendererMode} property
 ## is @qcode{"auto"} Octave will use the @qcode{"opengl"} renderer for raster
 ## formats (e.g., JPEG) and @qcode{"painters"} for vector formats (e.g., PDF).
+## Those options are only supported for the "qt" graphics tookit.
 ##
 ## @item -svgconvert
 ##   For OpenGL-based graphic toolkits, this enables a different backend
 ## toolchain with enhanced characteristics.  The toolchain adds support for
 ## printing arbitrary characters and fonts in PDF outputs; it avoids some
 ## anti-aliasing artifacts in the rendering of patch and surface objects
 ## (particularly for 2-D scenes); and it supports transparency of line, patch,
 ## and surface objects.
diff --git a/scripts/plot/util/private/__print_parse_opts__.m b/scripts/plot/util/private/__print_parse_opts__.m
--- a/scripts/plot/util/private/__print_parse_opts__.m
+++ b/scripts/plot/util/private/__print_parse_opts__.m
@@ -224,24 +224,38 @@ function arg_st = __print_parse_opts__ (
 
   if (strcmp (arg_st.renderer, "auto")
       && strcmp (get (arg_st.figure, "renderermode"), "manual"))
     arg_st.renderer = get (arg_st.figure, "renderer");
   endif
 
   if (strcmp (arg_st.renderer, "auto"))
     if (opengl_ok && strcmp (graphics_toolkit (arg_st.figure), "qt"))
-      arg_st.renderer = "opengl";
+      ## "opengl" renderer only does text rotations of 0°, 90°, 180°, 270°, ...
+      ht = findall (arg_st.figure, "type", "text");
+      angles = [get(ht, "rotation"){:}];
+      if (any (mod (angles, 90)))
+        arg_st.renderer = "painters";
+      else
+        arg_st.renderer = "opengl";
+      endif
     else
       arg_st.renderer = "painters";
     endif
   elseif (strcmp (arg_st.renderer, "opengl") && ! opengl_ok)
     arg_st.renderer = "painters";
-    warning (["print: unsupported output format \"%s\" for renderer ", ...
-              "\"opengl\"."], arg_st.devopt);
+    warning (['print: unsupported output format "%s" for renderer ', ...
+              '"opengl".'], arg_st.devopt);
+  elseif (! strcmp (graphics_toolkit (arg_st.figure), "qt")
+          && strcmp (arg_st.renderer, "opengl"))
+    ## The opengl renderer only works with the "qt" toolkit
+    arg_st.renderer = "painters";
+    warning ('Octave:print:unsupported-renderer',
+             'print: "opengl" renderer unsupported for "%s" toolkit',
+             graphics_toolkit (arg_st.figure));
   endif
 
   
   if (arg_st.use_color == 0)
     if (any (strcmp ({"ps", "ps2", "eps", "eps2"}, arg_st.devopt)))
       arg_st.use_color = -1;
     else
       arg_st.use_color = 1;
