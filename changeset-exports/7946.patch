# HG changeset patch
# User John W. Eaton <jwe@octave.org>
# Date 1216412712 14400
#      Fri Jul 18 16:25:12 2008 -0400
# Node ID ebe275f82bd5ebb49120d913464c90dde12619db
# Parent  456578a22388f7aab185cb82b461bf5b6f88c39c
src/Makefile.in (EXTRAS): Add graphics.cc to the list

diff --git a/src/ChangeLog b/src/ChangeLog
--- a/src/ChangeLog
+++ b/src/ChangeLog
@@ -1,8 +1,13 @@
+2008-07-18  John W. Eaton  <jwe@octave.org>
+
+	* Makefile.in (EXTRAS): Add graphics-props.cc to the list.
+	List graphics-props.cc as a target generated by genprops.awk.
+
 2008-07-18 Carlo de Falco  <carlo.defalco@gmail.com>
 
 	* gl-render.h: Conditionally include GL/gl.h or OpenGL/gl.h
 	and GL/glu.h or OpenGL/glu.h
 
 2008-07-17  John W. Eaton  <jwe@octave.org>
 
 	* symtab.cc (out_of_date_check_internal): New arg, dispatch_type.
diff --git a/src/Makefile.in b/src/Makefile.in
--- a/src/Makefile.in
+++ b/src/Makefile.in
@@ -213,17 +213,17 @@ DIST_SRC := Cell.cc bitfcns.cc c-file-pt
 	unwind-prot.cc utils.cc variables.cc xdiv.cc xpow.cc \
 	$(OV_SRC) \
 	$(PT_SRC)
 
 SOURCES := $(DIST_SRC) $(OP_SRC) $(TI_SRC)
 
 BUILT_EXTRAS := graphics.h mxarray.h
 
-EXTRAS := ov-base-int.cc ov-base-mat.cc ov-base-scalar.cc
+EXTRAS := ov-base-int.cc ov-base-mat.cc ov-base-scalar.cc graphics-props.cc
 
 EXTRA_OBJECTS := oct-errno.o octave.o builtins.o ops.o
 
 INCLUDES_FOR_INSTALL := $(INCLUDES) $(EXTRAS) $(BUILT_EXTRAS)
 
 OBJECTS_4 := $(notdir $(SOURCES))
 OBJECTS_3 := $(patsubst %.l, %.o, $(OBJECTS_4))
 OBJECTS_2 := $(patsubst %.y, %.o, $(OBJECTS_3))
@@ -378,20 +378,22 @@ pic:
 
 builtins.cc: $(DEF_FILES) mkbuiltins
 	@echo making $@
 	@echo DEF_FILES = $(DEF_FILES)
 	@echo $(DEF_FILES) > def-files
 	@$(srcdir)/mkbuiltins def-files > $@-t
 	@mv $@-t $@
 
-graphics.h: graphics.h.in genprops.awk
-	@echo making $@
-	@$(AWK) -f $(srcdir)/genprops.awk $< > $@-t
-	@mv $@-t $@
+## FIXME -- maybe genprops.awk should write both output files?
+## Or maybe there should be separate commands to generate each file?
+graphics.h graphics-props.cc: graphics.h.in genprops.awk
+	@echo making graphics.h and graphics-props.cc
+	@$(AWK) -f $(srcdir)/genprops.awk $< > graphics.h-t
+	@mv graphics.h-t graphics.h
 
 PKG_ADD: $(DLD_DEF_FILES)
 	$(srcdir)/mk-pkg-add $(DLD_DEF_FILES) > $@-t
 	@mv $@-t $@
 
 DOCSTRINGS: gendoc$(BUILD_EXEEXT)
 	@echo making $@
 	@./gendoc > $@-t
