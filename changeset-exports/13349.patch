# HG changeset patch
# User Jacob Dawid <jacob.dawid@googlemail.com>
# Date 1302165844 -7200
#      Thu Apr 07 10:44:04 2011 +0200
# Node ID a88e98b714d9205b5c0e8ecc81dcea234cfcf9f2
# Parent  0a5619ea17a604ba3ee392b7ac7ad32f4484b990
Terminal relaunches on exit.

diff --git a/gui//qtermwidget/lib/Makefile b/gui//qtermwidget/lib/Makefile
--- a/gui//qtermwidget/lib/Makefile
+++ b/gui//qtermwidget/lib/Makefile
@@ -1,11 +1,11 @@
 #############################################################################
 # Makefile for building: libqtermwidget.a
-# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:08:11 2011
+# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:32:32 2011
 # Project:  lib.pro
 # Template: lib
 # Command: /usr/bin/qmake -o Makefile lib.pro
 #############################################################################
 
 first: all
 install: release-install debug-install 
 uninstall: release-uninstall debug-uninstall 
diff --git a/gui//qtermwidget/lib/Makefile.Debug b/gui//qtermwidget/lib/Makefile.Debug
--- a/gui//qtermwidget/lib/Makefile.Debug
+++ b/gui//qtermwidget/lib/Makefile.Debug
@@ -1,11 +1,11 @@
 #############################################################################
 # Makefile for building: libqtermwidget_d.a
-# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:08:11 2011
+# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:32:32 2011
 # Project:  lib.pro
 # Template: lib
 #############################################################################
 
 ####### Compiler, tools and options
 
 CC            = gcc
 CXX           = g++
diff --git a/gui//qtermwidget/lib/Makefile.Release b/gui//qtermwidget/lib/Makefile.Release
--- a/gui//qtermwidget/lib/Makefile.Release
+++ b/gui//qtermwidget/lib/Makefile.Release
@@ -1,11 +1,11 @@
 #############################################################################
 # Makefile for building: libqtermwidget.a
-# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:08:11 2011
+# Generated by qmake (2.01a) (Qt 4.7.2) on: Do. Apr 7 10:32:32 2011
 # Project:  lib.pro
 # Template: lib
 #############################################################################
 
 ####### Compiler, tools and options
 
 CC            = gcc
 CXX           = g++
diff --git a/gui//terminal.cpp b/gui//terminal.cpp
--- a/gui//terminal.cpp
+++ b/gui//terminal.cpp
@@ -1,6 +1,16 @@
 #include "terminal.h"
 
 Terminal::Terminal()
-    : QMdiSubWindow() {
-    setWidget(new QTermWidget(1, this));
+    : QMdiSubWindow(),
+      m_terminalWidget(0) {
+    launchTerminal();
 }
+
+void Terminal::launchTerminal() {
+    delete m_terminalWidget;
+    m_terminalWidget = new QTermWidget(1, this);
+    m_terminalWidget->setScrollBarPosition(QTermWidget::ScrollBarRight);
+    setWidget(m_terminalWidget);
+
+    connect(m_terminalWidget, SIGNAL(finished()), this, SLOT(launchTerminal()));
+}
diff --git a/gui//terminal.h b/gui//terminal.h
--- a/gui//terminal.h
+++ b/gui//terminal.h
@@ -1,12 +1,19 @@
 #ifndef TERMINAL_H
 #define TERMINAL_H
 
 #include <QMdiSubWindow>
 #include "qtermwidget.h"
 
 class Terminal : public QMdiSubWindow {
+    Q_OBJECT
 public:
     Terminal();
+
+private slots:
+    void launchTerminal();
+
+private:
+    QTermWidget *m_terminalWidget;
 };
 
 #endif // TERMINAL_H
