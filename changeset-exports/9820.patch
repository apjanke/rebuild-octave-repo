# HG changeset patch
# User John W. Eaton <jwe@octave.org>
# Date 1258392728 18000
#      Mon Nov 16 12:32:08 2009 -0500
# Node ID a262b41eaa1533ce4e5fe7bc020167d1b16621e7
# Parent  84398271118ca9b45580b199b0bc01e0b80dd329
common.mk: don't include DLL_CXXDEFS in AM_CXXFLAGS

diff --git a/ChangeLog b/ChangeLog
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,8 +1,14 @@
+2009-11-16  John W. Eaton  <jwe@octave.org>
+
+	* common.mk (AM_CXXFLAGS): Don't include DLL_CXXDEFS in the list.
+	(CONFIGURE_CFLAGS): New variable.
+	(AM_CFLAGS): Define similar to AM_CXXFLAGS.
+
 2009-11-12  John W. Eaton  <jwe@octave.org>
 
 	* configure.ac (AC_CONFIG_FILES): Also generate libcruft/mkf77def.
 
 2009-11-11  John W. Eaton  <jwe@octave.org>
 
 	* acinclude.m4 (OCTAVE_IEEE754_DATA_FORMAT): Fail if IEEE 754
 	format is not detected.
diff --git a/common.mk b/common.mk
--- a/common.mk
+++ b/common.mk
@@ -100,21 +100,22 @@ PTHREAD_LIBS = @PTHREAD_LIBS@
 LIBFLAGS = -L$(TOPDIR)
 
 DEFS = @DEFS@
 
 UGLY_DEFS = @UGLY_DEFS@
 
 CC = @CC@
 CC_VERSION = @CC_VERSION@
-AM_CFLAGS = @CFLAGS@
+CONFIGURE_CFLAGS = @CFLAGS@
 CPICFLAG = @CPICFLAG@
 XTRA_CFLAGS = @XTRA_CFLAGS@
 WARN_CFLAGS = @WARN_CFLAGS@
-ALL_CFLAGS = $(INCFLAGS) $(DLL_CDEFS) $(DEFS) $(XTRA_CFLAGS) $(WARN_CFLAGS) $(CFLAGS) $(PTHREAD_CFLAGS)
+AM_CFLAGS = $(CONFIGURE_CFLAGS) \
+  $(INCFLAGS) $(DEFS) $(XTRA_CFLAGS) $(WARN_CFLAGS) $(CFLAGS) $(PTHREAD_CFLAGS)
 BUG_CFLAGS = $(DEFS) $(XTRA_CFLAGS) $(WARN_CFLAGS) $(CFLAGS)
 
 BUILD_CC = @BUILD_CC@
 BUILD_CFLAGS = @BUILD_CFLAGS@
 
 DEPEND_FLAGS = @DEPEND_FLAGS@
 DEPEND_EXTRA_SED_PATTERN = @DEPEND_EXTRA_SED_PATTERN@
 INCLUDE_DEPS = @INCLUDE_DEPS@
@@ -127,17 +128,17 @@ GRAPHICS_CFLAGS = @GRAPHICS_CFLAGS@
 CXX = @CXX@
 CXX_VERSION = @CXX_VERSION@
 CXXCPP = @CXXCPP@
 CONFIGURE_CXXFLAGS = @CXXFLAGS@
 CXXPICFLAG = @CXXPICFLAG@
 XTRA_CXXFLAGS = @XTRA_CXXFLAGS@
 WARN_CXXFLAGS = @WARN_CXXFLAGS@
 AM_CXXFLAGS = $(CONFIGURE_CXXFLAGS) \
-  $(INCFLAGS) $(DLL_CXXDEFS) $(DEFS) $(XTRA_CXXFLAGS) $(WARN_CXXFLAGS) $(CXXFLAGS) $(PTHREAD_CFLAGS)
+  $(INCFLAGS) $(DEFS) $(XTRA_CXXFLAGS) $(WARN_CXXFLAGS) $(CXXFLAGS) $(PTHREAD_CFLAGS)
 BUG_CXXFLAGS = $(DEFS) $(XTRA_CXXFLAGS) $(WARN_CXXFLAGS) $(CXXFLAGS)
 
 BUILD_CXX = @BUILD_CXX@
 BUILD_CXXFLAGS = @BUILD_CXXFLAGS@
 
 NO_UNDEFINED_LDFLAG = @NO_UNDEFINED_LDFLAG@
 
 LD_CXX = @LD_CXX@
