# HG changeset patch
# User John W. Eaton <jwe@octave.org>
# Date 1506132181 14400
#      Fri Sep 22 22:03:01 2017 -0400
# Node ID 80906ac05e7d9ca162b0096b065ae036197f79bf
# Parent  19d8d99152e95b78aa2b042833175c009ead2328
* lex.ll: Disable GCC diagnostic -Wimplicit-fallthrough.

diff --git a/libinterp/parse-tree/lex.ll b/libinterp/parse-tree/lex.ll
--- a/libinterp/parse-tree/lex.ll
+++ b/libinterp/parse-tree/lex.ll
@@ -42,16 +42,17 @@ object) relevant global values before an
 
 // Disable these warnings for code that is generated by flex, including
 // pattern rules.  Push the current state so we can restore the warning
 // state prior to functions we define at the bottom of the file.
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wold-style-cast"
 #pragma GCC diagnostic ignored "-Wsign-compare"
 #pragma GCC diagnostic ignored "-Wzero-as-null-pointer-constant"
+#pragma GCC diagnostic ignored "-Wimplicit-fallthrough"
 
 #endif
 
 // Define away the deprecated register storage class specifier to avoid
 // potential warnings about it.
 #if ! defined (register)
 #  define register
 #endif
@@ -1772,26 +1773,18 @@ ANY_INCLUDING_NL (.|{NL})
         curr_lexer->current_input_column++;
 
         return curr_lexer->count_token_internal (LEXICAL_ERROR);
       }
   }
 
 %{
 #if defined (HAVE_PRAGMA_GCC_DIAGNOSTIC)
-// Disable this warning for code that is generated by flex.
-#pragma GCC diagnostic push
+// Disable these warnings for flex code.
 #pragma GCC diagnostic ignored "-Wold-style-cast"
-#endif
-%}
-
-%{
-#if defined (HAVE_PRAGMA_GCC_DIAGNOSTIC)
-// Also disable this warning for functions that is generated by flex
-// after the pattern rules.
 #pragma GCC diagnostic ignored "-Wunused-parameter"
 #endif
 %}
 
 %%
 
 #if defined (HAVE_PRAGMA_GCC_DIAGNOSTIC)
 // Restore prevailing warning state for remainder of the file.
